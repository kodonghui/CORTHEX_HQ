# 추상화 + 인터페이스

> 누나가 던진 말: "추상화 인터페이스부터 잡고가야지 그래서 개발팀장이랑 PM 지정은 꼭 필요"

---

## 한 줄 요약

- **추상화** = 복잡한 내부를 숨기고 **"이것만 알면 돼"** 단순하게 만들기
- **인터페이스** = 서로 다른 부품들이 **연결되는 규격/약속**

---

## 추상화란?

### 현실 비유: 자동차 운전

```
실제 자동차 내부:
- 엔진 폭발 → 크랭크축 → 변속기 → 구동축 → 바퀴 회전
- 연료 분사 타이밍, 점화 순서...

운전자가 아는 것:
- 액셀 밟으면 달림
- 브레이크 밟으면 섬
```

→ **복잡한 내부를 숨기고 "액셀/브레이크"라는 단순한 인터페이스만 노출** = 추상화

### 코드에서의 추상화

```python
# 추상화 없이 (나쁜 예)
# arm_server.py에 모든 코드가 다 있음 (15,000줄!)

# 추상화 있이 (좋은 예)
# 각 기능이 분리된 파일에
from handlers.report_handler import generate_report
from handlers.trade_handler import execute_trade

generate_report(agent_id="금융분석팀장")  # 내부가 어떻게 돌아가는지 몰라도 됨
```

---

## 인터페이스란?

### 현실 비유: 충전기 규격

```
예전: 삼성 충전기 = 삼성 전용, LG 충전기 = LG 전용
지금: USB-C 인터페이스 표준화 → 어느 폰이든 같은 충전기 사용

→ "USB-C 포트" = 인터페이스 (어떻게 연결되는지의 규격)
```

### 코드에서의 인터페이스

```
인터페이스 = "이 모듈은 이런 방식으로 사용하세요"라는 약속

예: AI 에이전트 인터페이스
- 입력: { role: "팀장", task: "분석", data: {...} }
- 출력: { result: "...", confidence: 0.9 }

이 약속만 지키면 내부가 GPT든 Claude든 Gemini든 바꿔끼워도 됨
```

---

## 왜 "처음부터" 잡아야 하나?

> 누나: "15,000줄 main.py에 집어넣었다가... v4 올라가면서 싹 정리했어요 리팩토링"

```
추상화 안 했을 때 (대표님 경험):
→ arm_server.py에 모든 코드 (15,000줄)
→ 한 부분 고치면 다른 부분 터짐
→ 어디서 뭐가 잘못됐는지 찾기 어려움
→ AI도 "컨텍스트 너무 길어서 못 읽어요"

추상화 했을 때:
→ 파일들이 역할별로 분리
→ handlers/, models/, utils/ 각자 파일
→ 한 파일 고쳐도 다른 파일에 영향 최소화
```

---

## CORTHEX 현재 상태

- v4에서 리팩토링 완료 → 핸들러 26개 분리됨
- 누나가 보면 "오 개발팀장이 있었구나" 수준
- 아직 개선 여지 있음 (4-3 과제: FastAPI 라우터 분리 등)
