# 테스트: 유닛테스트 + 앤드유저테스트 + curl

> 누나가 던진 말: "개발이랑 당연히 유닛테스트안래? 그리고 qa팀 앤드유저 테스트안해 이새키들 개빠져가지고"
> / "앤드유저는 curl로 웹테스트랑 curl까지 잡아서 내가 캐치 못한거까지 해"

---

## 테스트 3단계 구조

```
[개발] → [유닛테스트] → [앤드유저 테스트(curl)] → [출시]
```

---

## 1. 유닛테스트 (Unit Test)

### 한 줄 요약
**부품 하나하나가 제대로 동작하는지 확인하는 테스트**

### 현실 비유

자동차 공장:
- 엔진만 따로 돌려봄 → OK?
- 브레이크만 따로 눌러봄 → OK?
- 그다음 조립

```python
# 예시: 보고서 생성 함수 테스트
def test_report_generation():
    result = generate_report(agent="금융분석팀장", data=test_data)
    assert result["status"] == "success"     # 성공했는지
    assert len(result["content"]) > 100      # 내용이 있는지
    assert result["confidence"] >= 0.8       # 신뢰도 기준 충족인지
```

### 누나가 화난 이유
"개발 완료"라고 했는데 유닛테스트 안 함 → 단순한 버그가 출시 후 발견됨

---

## 2. 앤드유저 테스트 (End-User Test)

### 한 줄 요약
**실제 사용자 입장에서 전체 흐름을 테스트**

유닛테스트 = 부품 확인
앤드유저 테스트 = **실제 차 몰아보기**

```
사용자가 하는 행동 그대로 시뮬레이션:
1. 로그인 화면 접속
2. 분석 명령 입력
3. 보고서 수신
4. 피드백 입력
→ 이 전체 흐름이 터지지 않는지 확인
```

---

## 3. curl (컬)

### 한 줄 요약
**터미널에서 HTTP 요청을 보내는 도구** (브라우저 없이 API 직접 호출)

### 현실 비유

```
브라우저로 테스트 = 가게 직접 가서 구매해봄
curl로 테스트   = 전화로 "이 상품 있어요?" 직접 물어봄
              → 브라우저 렌더링 오류와 API 오류를 구분 가능
```

### 실제 사용 예

```bash
# 보고서 API가 제대로 응답하는지 확인
curl -X POST https://corthex-hq.com/api/analyze \
  -H "Content-Type: application/json" \
  -d '{"agent": "금융분석팀장", "task": "삼성전자 분석"}'

# 정상 응답: {"status": "ok", "report_id": "..."}
# 오류 응답: {"error": "agent not found"}
```

### 누나 말의 의미

> "앤드유저는 curl로 웹테스트랑 curl까지 잡아서 내가 캐치 못한 거까지 해"

= 클로드(AI 개발자)가 자기 테스트에서 못 잡은 버그를
  curl로 API 직접 호출해서 한 번 더 검증한다는 것

---

## 세 단계 정리

| 단계 | 뭘 테스트하나 | 누가 |
|------|--------------|------|
| 유닛테스트 | 함수/부품 하나 | 개발자(AI) |
| 앤드유저 테스트 | 전체 사용 흐름 | QA팀 또는 실제 사용자 역할 AI |
| curl 테스트 | API 응답 직접 확인 | 개발자(AI) 추가 검증 |
