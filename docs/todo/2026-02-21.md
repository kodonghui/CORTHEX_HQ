# 2026-02-21 TODO

> 이전 TODO 파일에서 미완료 항목 전부 이관 완료

---

## 🔴 최우선 (오늘 반드시)

### 노션 연동
- ✅ 노션 보고 구조 결정: 서버 자동 업로드 (에이전트 도구 제거, 서버만 사용)
- ✅ DB 헤더 수정 (에이전트산출물 + 비서실 — Claude Chat에서 완료)
- ✅ _save_to_notion 속성 타입 수정 (rich_text → select, 이름 일치)
- ✅ 기본 DB ID 업데이트 (실제 노션 URL에서 추출한 값 반영)
- ✅ 에이전트 4명 allowed_tools에서 notion_api 제거
- ⬜ 배포 후 동작 확인 (/api/notion-log에서 저장 성공 여부 체크)

---

## 🔄 오늘 진행 중

### 프로젝트 정리 (대표님 지시)
- ✅ CLAUDE.md 다이어트 (227줄→186줄, 시크릿표 축소 / 보고형식 / TODO규칙 / 작성규칙)
- ✅ docs 폴더 정리 (완료된 TODO·프롬프트 → docs/archive/ 이동)
- ✅ 오늘 TODO 파일 생성 + 기존 미완료 이관
- ✅ 불필요 파일 삭제 (run.bat, setup.bat, setup.sh, plan.md, my-skills-plugin.zip)
- ✅ run_web.py + main.py 삭제 + pyproject.toml 수정
- ✅ README.md 최신화 (도메인, 모델 10종, 도구 125개+ 반영)
- ✅ CONTEXT.md 최신화 (CEO→대표, 비개발자→법학전공, 모델·도구 수 갱신)
- ✅ .gitignore 보강 (*.zip, *.bak, corthex.log, corthex.db)
- ✅ 고민상담.md 생성
- ⬜ DB soul 오버라이드 정리 (souls/*.md만 쓰도록 통일)
- ⬜ project-status.md 최신화

### 정보국(knowledge) 페이지 활용 아이디어
> **맥락**: 현재 정보국 페이지(knowledge/)는 UI에 탭이 있고, 파일 7개(~38KB)가 있지만,
> 에이전트가 실제로 읽지 않음. mini_server.py에서 knowledge를 주입하지 않기 때문.
> 매 요청마다 주입하면 토큰 비용 증가 (~2,000-3,000 토큰/요청).
>
> **아이디어**: 에이전트가 필요할 때만 "도구(tool)"로 읽게 하면 토큰 절약 가능.
> 예: `read_knowledge(division="finance")` → 해당 부서 지식만 가져오기.
> 이렇게 하면 평소에는 토큰 0, 필요할 때만 ~1,500 토큰 사용.

- ⬜ 정보국 knowledge를 "도구"로 변환 (매번 주입 대신 필요시 호출)
- ⬜ read_knowledge 도구 구현 (division 파라미터로 부서별 조회)
- ⬜ 에이전트 allowed_tools에 read_knowledge 추가

---

## ⬜ 미완료 이관 (이전 TODO에서)

### 버그
- ⬜ 직원 모델 설정 '권장' 버튼 안 먹힘 (대표님 02-21 보고)

### 전수검사 미수정 항목 (project-status.md P2 시리즈)
- ⬜ P2-2: 교신로그 탭 전환 버그
- ⬜ P2-3: 교신로그 도구 사용 표시
- ⬜ P2-4: CIO 독자 분석 병렬 실행
- ⬜ P2-5: 새로고침 시 분석 재연결
- ⬜ P2-6: 시세 새로고침 SSE (B안)
- ⬜ P2-7: CIO 목표가 산출
- ⬜ P2-10: CIO 성과 탭 전수검사
- ⬜ P2-11: 종목 클릭 차트 (C안 슬라이드패널)
- ⬜ P2-12: order_size 10,000원 수정

### 도구 개발 (대표님 02-20 저녁 지시)
- ⬜ CMO 이미지 생성 도구 8개 (Gemini 기반, gemini_*.py 미커밋 파일 활용)
- ⬜ CTO 교수급 도구 5개
- ⬜ CSO 교수급 도구 5개
- ⬜ CPO 교수급 도구 5개
- ⬜ 비서실 교수급 도구 3개

### 기능 개선
- ⬜ SNS 실제 발행 연동 (인스타그램 우선)
- ⬜ 사령관실 내부통신 C안 (SSE 상시 + P2P)
- ⬜ 전략실 교신로그 C안 (분석별 그룹핑)
- ⬜ 프론트엔드 버그 F1~F3 (commandInput, tools 이중호출, 미사용 변수)

### 장기 로드맵 (TODO.md Phase 7~12)
- ⬜ Phase 7: 풀 백엔드 전환 (mini_server → app.py)
- ⬜ Phase 8: 기능 자동 활성화 (orchestrator, scheduler 등)
- ⬜ Phase 9: 외부 연동 (OpenAI, 노션, SNS, 텔레그램 업그레이드)
- ⬜ Phase 10: 전문 도구 125개 검증
- ⬜ Phase 11: 에이전트 소울 고도화
- ⬜ Phase 12: 프로덕션 마무리 (모니터링, 백업)

---

## ✅ 오늘 완료

- ✅ leet-master 폴더 정리 프롬프트 전달
- ✅ 노션 도구 사용 에이전트 확인 (5명: 비서실장/CPO/연대기/아카이브/보고서)
- ✅ 호칭 변경: "고동희 대표님" (CLAUDE.md + 메모리)
- ✅ CLAUDE.md 다이어트 (227→186줄)
- ✅ 저장소 전수검사 (루트/docs/config/src/web/souls 전부)
- ✅ 루트 파일 정리 (run.bat, setup.bat/sh, plan.md, my-skills-plugin.zip, main.py, run_web.py 삭제)
- ✅ docs/ archive 이동 (구 TODO 3개, 프롬프트 9개, 임시파일 12개)
- ✅ README.md + CONTEXT.md 최신화
- ✅ pyproject.toml 버전 0.1.0→3.01.000 + scripts 제거
- ✅ .gitignore 보강
- ✅ 고민상담.md 생성
- ✅ leet-master용 프롬프트 (자동머지 + 기록규칙 + TodoWrite)
- ✅ 노션 전수검사 + 코드 수정 (속성 타입 select 일치 + DB ID 업데이트 + 에이전트 도구 제거)
