# 핸드오프 — v5.2 완료 (빌드 #773~#776)

**날짜**: 2026-03-02 (KST) | **최신 빌드**: #776

---

## 이번 세션에서 완료한 것

### 빌드 #773 — workspace-profile 404 + 사이드바 + 대시보드 격리
| 수정 | 내용 |
|------|------|
| workspace-profile 404 | viewer 폴백 프로파일 반환 + 토큰 없으면 initWorkspace 스킵 |
| 사이드바 에이전트 안 보임 | sidebarFilter 기본값 문제 근본 수정 |
| $204.86 누나 노출 | /api/dashboard orgScope 필터 추가 |

### 빌드 #775 — showSections + CLAUDE.md 재구축
| 항목 | 내용 |
|------|------|
| showSections 탭 격리 | CEO=[] (전체), sister=[home,command,performance] |
| corthex-app.js | _tabAllowed() 헬퍼 추가, getPrimaryTabs/getSecondaryTabs에 적용 |
| CLAUDE.md | @import 추가, 자율 실행 모드, 검증 명령 구체화 |
| .claude/agents/ | log-analyzer.md (Haiku), security-reviewer.md (Sonnet) |
| .claude/rules/ | frontend.md, backend.md 경로별 규칙 |

### 빌드 #776 — 핫픽스
- arm_server.py: get_auth_org import 누락 수정
- workspaces.yaml: viewer showSections: [] 추가

---

## 현재 미해결 / 검증 필요

### 🟡 실제 로그인 검증 미완 (코드는 됐지만 눈으로 확인 안 됨)
- CEO 로그인 → 사이드바 에이전트 전부 보이는지 (비서실장 + 팀장들)
- 누나 로그인 → Eden/Zoe/Sage 보이는지, CEO 에이전트 안 보이는지
- 누나 로그인 → 탭이 home/command/performance 3개만 보이는지
- 누나 대시보드 → $204.86 안 보이는지

### 🟡 viewer showSections 미반영
- workspaces.yaml에 viewer.showSections: [] 추가됐는데 API 응답에 없음
- 로그인 전 상태라 실제 영향은 없음 (로그인 화면이 떠있으므로)
- 근본 원인: 서버 yaml 캐시 문제 가능성 → 서버 재시작 후 해결될 수 있음

---

## 현재 workspaces.yaml 구조

```yaml
ceo:
  sidebarFilter: ceo
  showSections: []      # 전체 탭
  orgScope: null        # 전체 데이터
  showBulkModel: true
  showSatisfaction: true
  allowedDivisions: []

sister:
  sidebarFilter: sister
  showSections: [home, command, performance]  # 3개 탭만
  orgScope: saju         # 사주 데이터만
  showBulkModel: false
  showSatisfaction: false
  allowedDivisions: [saju]

viewer:
  sidebarFilter: ""      # 에이전트 없음
  showSections: []
```

---

## 다음 세션 할 일

1. **실제 로그인 검증** (대표님이 직접 또는 WebFetch 제한으로 대표님께 확인 요청)
   - CEO/누나 로그인 후 사이드바/탭 정상 여부

2. **남은 BACKLOG 항목** (`docs/todo/BACKLOG.md` 참조)

3. **viewer showSections 미반영** → 다음 배포 시 자동 해결 예상

---

## 다음 세션 시작 프롬프트

```
안녕. docs/handoff/2026-03-02_v52-완료-핸드오프.md 읽어.
최신 빌드: #776. 미해결: 실제 로그인 검증.
대표님이 사이드바 에이전트 보이는지 확인 먼저 해달라고 해.
```
