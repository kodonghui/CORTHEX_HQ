<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>CORTHEX â€” ì½”ë“œ ì˜ì¡´ì„±</title>
<script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
<style>
  * { box-sizing: border-box; margin: 0; padding: 0; }
  body { background: #0d1117; color: #e6edf3; font-family: 'Segoe UI', sans-serif; padding: 32px; }
  h2 { font-size: 15px; color: #58a6ff; margin: 32px 0 12px; border-left: 3px solid #58a6ff; padding-left: 10px; }
  .subtitle { font-size: 12px; color: #8b949e; margin-bottom: 28px; }
  .diagram { background: #161b22; border: 1px solid #30363d; border-radius: 10px; padding: 24px; overflow-x: auto; }
  .mermaid { display: flex; justify-content: center; }
  .note { font-size: 11px; color: #8b949e; margin-top: 10px; padding-left: 4px; }
</style>
</head>
<body>

<p class="subtitle">CORTHEX HQ | P8 ì™„ë£Œ í›„ ìµœì¢… ìƒíƒœ | Ctrl+ìŠ¤í¬ë¡¤ í™•ëŒ€</p>

<h2>arm_server.py ì—ì„œ ë­ê°€ ì–´ë””ë¡œ ì—°ê²°ë˜ë‚˜</h2>
<div class="diagram">
<div class="mermaid">
graph LR
    ARM["ğŸ›ï¸ arm_server.py\n(ë¡œë¹„, ~300ì¤„)"]

    ARM --> ROUTER["ğŸ§  agent_router.py\nì—ì´ì „íŠ¸ ë¼ìš°íŒ…"]
    ARM --> TRADE["ğŸ“ˆ trading_engine.py\në§¤ë§¤Â·CIO"]
    ARM --> BATCH["ğŸ­ batch_system.py\në°°ì¹˜ ë¶„ì„"]
    ARM --> SCHED["â° scheduler.py\nìŠ¤ì¼€ì¤„"]
    ARM --> ARGOS["ğŸ”­ argos_collector.py\në‰´ìŠ¤Â·ì‹œí™© ìˆ˜ì§‘"]
    ARM --> CFG["âš™ï¸ config_loader.py\nì„¤ì • ë¡œë”©"]
    ARM --> HANDLERS["ğŸšª handlers/\nì ‘ìˆ˜ ì°½êµ¬ 28ê°œ"]

    ROUTER --> AI["ğŸ¤– ai_handler.py\nClaude API"]
    ROUTER --> DB["ğŸ—„ï¸ db.py\nDB"]
    ROUTER --> WS["ğŸ“¡ ws_manager.py\nì‹¤ì‹œê°„ í™”ë©´"]

    TRADE --> AI
    TRADE --> KIS["ğŸ’° kis_client.py\nì¦ê¶Œì‚¬ API"]
    TRADE --> DB
    TRADE --> WS

    BATCH --> AI
    BATCH --> DB
    BATCH --> WS

    SCHED --> BATCH
    SCHED --> SOUL["ğŸ’ª soul_gym_engine.py"]

    ARGOS --> AI
    ARGOS --> DB

    HANDLERS --> ROUTER
    HANDLERS --> TRADE
    HANDLERS --> BATCH
    HANDLERS --> ARGOS

    CFG --> STATE["ğŸ“Š state.py\nì „ì—­ìƒíƒœ"]

    AI --> WS

    style ARM fill:#0d1f3c,stroke:#1f6feb,color:#58a6ff
    style ROUTER fill:#1a2a0d,stroke:#2ea043
    style TRADE fill:#1a2a0d,stroke:#2ea043
    style BATCH fill:#1a2a0d,stroke:#2ea043
    style SCHED fill:#1a2a0d,stroke:#2ea043
    style ARGOS fill:#1a2a0d,stroke:#2ea043
    style CFG fill:#1a2a0d,stroke:#2ea043
    style HANDLERS fill:#2a1a0d,stroke:#d29922
    style AI fill:#1c1c1c,stroke:#444
    style KIS fill:#1c1c1c,stroke:#444
    style DB fill:#1c1c1c,stroke:#444
    style WS fill:#1c1c1c,stroke:#444
    style STATE fill:#1c1c1c,stroke:#444
    style SOUL fill:#1c1c1c,stroke:#444
</div>
</div>
<p class="note">ğŸŸ¦ ë¡œë¹„ | ğŸŸ© ì—”ì§„ (arm_server.pyì—ì„œ ë¶„ë¦¬) | ğŸŸ§ í•¸ë“¤ëŸ¬ | â¬› ê³µí†µ ë„êµ¬</p>

<h2>ê° ì—”ì§„ì´ ì–´ë–¤ ë„êµ¬ë¥¼ ì“°ë‚˜ (ì—”ì§„ â†’ ë„êµ¬)</h2>
<div class="diagram">
<div class="mermaid">
graph LR
    subgraph ì—”ì§„
        ROUTER2["ğŸ§  agent_router"]
        TRADE2["ğŸ“ˆ trading_engine"]
        BATCH2["ğŸ­ batch_system"]
        SCHED2["â° scheduler"]
        ARGOS2["ğŸ”­ argos_collector"]
    end

    subgraph ê³µí†µë„êµ¬
        AI2["ğŸ¤– ai_handler\nClaude API"]
        KIS2["ğŸ’° kis_client\nì¦ê¶Œì‚¬ API"]
        DB2["ğŸ—„ï¸ db\në°ì´í„° ì €ì¥"]
        WS2["ğŸ“¡ ws_manager\ní™”ë©´ ì—…ë°ì´íŠ¸"]
    end

    ROUTER2 --> AI2
    ROUTER2 --> DB2
    ROUTER2 --> WS2

    TRADE2 --> AI2
    TRADE2 --> KIS2
    TRADE2 --> DB2
    TRADE2 --> WS2

    BATCH2 --> AI2
    BATCH2 --> DB2
    BATCH2 --> WS2

    SCHED2 --> BATCH2

    ARGOS2 --> AI2
    ARGOS2 --> DB2

    AI2 --> WS2
</div>
</div>
<p class="note">ëª¨ë“  ì—”ì§„ì€ ê²°êµ­ ai_handler(Claude)ì™€ db(ì €ì¥), ws_manager(í™”ë©´ ì—…ë°ì´íŠ¸) 3ê°œë¥¼ ê³µí†µìœ¼ë¡œ ì”ë‹ˆë‹¤</p>

<script>
  mermaid.initialize({
    startOnLoad: true,
    theme: 'dark',
    flowchart: { useMaxWidth: false, curve: 'basis' },
    themeVariables: {
      primaryColor: '#161b22',
      primaryTextColor: '#e6edf3',
      lineColor: '#58a6ff',
      edgeLabelBackground: '#0d1117',
    }
  });
</script>
</body>
</html>
