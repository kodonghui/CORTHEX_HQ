# ğŸ§¬ Soul Gym ì•Œê³ ë¦¬ì¦˜ ì„¤ê³„

> VSCodeì—ì„œ ì´ íŒŒì¼ ì—´ê³  **`Ctrl+Shift+V`** ëˆ„ë¥´ë©´ ë‹¤ì´ì–´ê·¸ë¨ì´ í¬ê²Œ ë³´ì…ë‹ˆë‹¤.

---

## 1. ì „ì²´ íë¦„ (ëŒ€í‘œë‹˜ìš©)

```mermaid
flowchart TD
    START([ğŸ• ì›”ìš”ì¼ 03:00 KST\ní¬ë¡  ìë™ ì‹¤í–‰\në˜ëŠ” ëŒ€í‘œë‹˜ ìˆ˜ë™ ì‹¤í–‰])

    START --> SELECT["ğŸ“Š í•˜ìœ„ Nëª… ì„ ë³„\nì§€ë‚œ 2ì£¼ QA ì ìˆ˜ í‰ê· ì´\në‚®ì€ íŒ€ì¥ë¶€í„° ìˆœì„œëŒ€ë¡œ"]

    SELECT --> LOOP_START["ğŸ” íŒ€ì¥ 1ëª…ì”© ì§„í™” ì‹œì‘\nìµœëŒ€ 5ëª… / ë¹„ìš© $10 ì´ˆê³¼ ì‹œ ì¤‘ë‹¨"]

    LOOP_START --> LOAD["ğŸ“‚ í˜„ì¬ ì†Œìš¸ ë¡œë“œ\n1ìˆœìœ„: DB soul_íˆ¬ìíŒ€ì¥\n2ìˆœìœ„: souls/agents/cio_manager.md"]

    LOAD --> WARN["âš ï¸ ë°˜ë³µ ì‹¤ìˆ˜ ê¸°ë¡ ë¡œë“œ\nmemory_categorized_ì—ì´ì „íŠ¸\nì•ˆì— ìˆëŠ” warnings ì¹´í…Œê³ ë¦¬"]

    WARN --> GEN["ğŸ¤– Haikuê°€ ë³€ì´ 3ê°œ ìƒì„±\n\nVariant A â€” ê·œì¹™ ì¶”ê°€í˜•\nê¸°ì¡´ ì†Œìš¸ì— ìƒˆ ê·œì¹™ 1~2ì¤„ ì¶”ê°€\n\nVariant B â€” í‘œí˜„ ê°•í™”í˜•\nê¸°ì¡´ ëª¨í˜¸í•œ ê·œì¹™ì„ ë” êµ¬ì²´ì ìœ¼ë¡œ\n\nVariant C â€” êµì°¨í˜•\nAì™€ Bì˜ ì¥ì ì„ ì„ì–´ì„œ"]

    GEN --> BENCH["ğŸ‹ï¸ ë²¤ì¹˜ë§ˆí¬ ê²½ê¸°\nì›ë³¸ ì†Œìš¸ vs A vs B vs C\nê°ì ê°™ì€ ì‹œí—˜ì§€ 3ë¬¸ì œ í’€ê¸°\n\nì˜ˆ: íˆ¬ìíŒ€ì¥\në¬¸ì œ1 - PER ë¹„êµë¶„ì„ + íˆ¬ìì˜ê²¬\në¬¸ì œ2 - ê¸ˆë¦¬ ìƒìŠ¹ ì‹œë‚˜ë¦¬ì˜¤ ë¶„ì„\në¬¸ì œ3 - ë¦¬ìŠ¤í¬ í—¤ì§€ ì „ëµ"]

    BENCH --> JUDGE["âš–ï¸ Sonnetì´ ì±„ì \nê° ë‹µë³€ì„ 0~100ì  í‰ê°€\n\nì±„ì  ê¸°ì¤€\nBLUF í˜•ì‹ 20ì \nì „ë¬¸ì„± 30ì \nêµ¬ì²´ì„± 30ì \nêµ¬ì¡° 20ì "]

    JUDGE --> COMPARE{"ğŸ† ë¹„êµ\nìµœê³  ì ìˆ˜ ë³€ì´ê°€\nì›ë³¸ë³´ë‹¤ ë†’ì€ê°€?"}

    COMPARE -->|"ì•„ë‹ˆìš”\nì›ë³¸ì´ ìµœê³ "| NOCHANGE["âœ… ë³€ê²½ ì—†ìŒ\nì´ë²ˆ ë¼ìš´ë“œ ì›ë³¸ ìœ ì§€\nDBì— ê¸°ë¡ë§Œ ë‚¨ê¹€"]

    COMPARE -->|"ì˜ˆ\nê°œì„  ìˆìŒ"| TELEGRAM["ğŸ“± í…”ë ˆê·¸ë¨ ì•Œë¦¼\nëŒ€í‘œë‹˜ì—ê²Œ ì „ì†¡\n\nğŸ§¬ íˆ¬ìíŒ€ì¥ ì§„í™” ì œì•ˆ\nì ìˆ˜ 67 â†’ 81 +14ì \në³€ê²½ ë‚´ìš© ëª©í‘œê°€ 3ì‹œë‚˜ë¦¬ì˜¤ ê·œì¹™ ì¶”ê°€\n\nâœ… ìŠ¹ì¸  âŒ ê±°ë¶€"]

    TELEGRAM --> APPROVE{"ëŒ€í‘œë‹˜ ê²°ì •"}

    APPROVE -->|"âœ… ìŠ¹ì¸"| SAVE["ğŸ’¾ DBì— ìƒˆ ì†Œìš¸ ì €ì¥\nsoul_cio_manager í‚¤ì—\nì—…ë°ì´íŠ¸ëœ ë‚´ìš© ë®ì–´ì“°ê¸°\n\në‹¤ìŒ ë¶„ì„ë¶€í„° ìƒˆ ì†Œìš¸ ì ìš©"]

    APPROVE -->|"âŒ ê±°ë¶€"| REJECT["ğŸš« ê¸°ì¡´ ì†Œìš¸ ìœ ì§€\nê±°ë¶€ ì´ìœ  ê¸°ë¡"]

    SAVE --> RECORD["ğŸ“ soul_gym_rounds í…Œì´ë¸”ì—\nê²°ê³¼ ì €ì¥\nì—ì´ì „íŠ¸ ë¼ìš´ë“œ ì ìˆ˜ë³€í™”\nì±„íƒ ë³€ì´ ë¹„ìš© ë‚ ì§œ"]

    REJECT --> RECORD
    NOCHANGE --> RECORD

    RECORD --> NEXT{"ë‹¤ìŒ íŒ€ì¥\nìˆëŠ”ê°€?"}

    NEXT -->|"ì˜ˆ"| LOOP_START
    NEXT -->|"ì•„ë‹ˆìš”\në˜ëŠ” ë¹„ìš© $10 ì´ˆê³¼"| DONE["ğŸ‰ ì™„ë£Œ\nê²°ê³¼ ìš”ì•½ í…”ë ˆê·¸ë¨ ë°œì†¡\nì›¹ UI Soul Gym íƒ­ì—ì„œ í™•ì¸"]

    style START fill:#1a1a2e,color:#e0e0ff,stroke:#4a90e2,stroke-width:2px
    style DONE fill:#1a2e1a,color:#e0ffe0,stroke:#4ae24a,stroke-width:2px
    style TELEGRAM fill:#2e1a1a,color:#ffe0e0,stroke:#e24a4a,stroke-width:2px
    style SAVE fill:#1a2e1a,color:#e0ffe0,stroke:#4ae24a,stroke-width:2px
    style REJECT fill:#2e1a1a,color:#ffe0e0,stroke:#e24a4a,stroke-width:2px
    style COMPARE fill:#2e2e1a,color:#ffffe0,stroke:#e2e24a,stroke-width:2px
    style APPROVE fill:#2e2e1a,color:#ffffe0,stroke:#e2e24a,stroke-width:2px
    style NOCHANGE fill:#1a2e2e,color:#e0ffff,stroke:#4ae2e2,stroke-width:2px
```

---

## 2. ë³€ì´ 3ê°œ ì–´ë–»ê²Œ ë§Œë“œë‚˜ (Haiku í”„ë¡¬í”„íŠ¸ êµ¬ì¡°)

```mermaid
flowchart LR
    INPUT["ì…ë ¥ ë°ì´í„°\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\ní˜„ì¬ ì†Œìš¸ ì• 1500ì\nìµœê·¼ warnings ë‚´ìš©\nì´ì „ ë¼ìš´ë“œ ê¸°ë¡\nì˜ˆ: Round1 +16ì  ì±„íƒ\nì˜ˆ: Round2 -2ì  ê¸°ê°"]

    INPUT --> META["OPRO ë©”íƒ€í”„ë¡¬í”„íŠ¸\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nê³¼ê±°ì— ë­ê°€ íš¨ê³¼ ìˆì—ˆëŠ”ì§€\nì—­ì‚¬ë¥¼ ë³´ê³  íŒë‹¨í•´ì„œ ë³€ì´ ìƒì„±\n\nì´ë¯¸ íš¨ê³¼ ì—†ì—ˆë˜ ë°©í–¥ì€ í”¼í•¨\nì´ë¯¸ íš¨ê³¼ ìˆì—ˆë˜ ë°©í–¥ì€ ê°•í™”"]

    META --> VA["Variant A\nê·œì¹™ ì¶”ê°€í˜•\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nê¸°ì¡´ ì†Œìš¸ ì „ì²´ ìœ ì§€\nìƒˆ ê·œì¹™ 1~2ì¤„ë§Œ ì¶”ê°€\n\nì˜ˆì‹œ ì¶”ê°€ ë‚´ìš©\nëª©í‘œê°€ëŠ” ë‹¨ê¸° ì¤‘ê¸° ì¥ê¸°\n3ê°€ì§€ ì‹œë‚˜ë¦¬ì˜¤ë¡œ ì œì‹œí•  ê²ƒ\nìˆ˜ì¹˜ ì¸ìš© ì‹œ ë‚ ì§œì™€\nì¶œì²˜ ë°˜ë“œì‹œ ëª…ì‹œí•  ê²ƒ"]

    META --> VB["Variant B\ní‘œí˜„ ê°•í™”í˜•\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nê¸°ì¡´ ê·œì¹™ ì¤‘\nëª¨í˜¸í•œ í‘œí˜„ì„ ì°¾ì•„ì„œ\në” êµ¬ì²´ì ìœ¼ë¡œ ìˆ˜ì •\n\nì˜ˆì‹œ ë³€ê²½\në¶„ì„í•˜ë¼\nâ†’ PER PBR ROE 3ê°œ ëª¨ë‘\nìˆ˜ì¹˜ë¡œ ë¹„êµ í›„ ê²°ë¡  ì œì‹œ"]

    META --> VC["Variant C\nêµì°¨í˜•\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nAì˜ ìƒˆ ê·œì¹™ ì¶”ê°€ +\nBì˜ í‘œí˜„ ê°•í™”ë¥¼\në™ì‹œì— ì ìš©\nEvoPrompt êµì°¨ ì—°ì‚°"]

    style META fill:#1a1a2e,color:#e0e0ff,stroke:#4a90e2
    style VA fill:#1a2e2e,color:#e0ffff,stroke:#4ae2e2
    style VB fill:#2e1a2e,color:#ffe0ff,stroke:#e24ae2
    style VC fill:#2e2e1a,color:#ffffe0,stroke:#e2e24a
```

---

## 3. ì±„ì  ë°©ì‹ (LLM-as-Judge)

```mermaid
flowchart TD
    Q["ğŸ“‹ ë²¤ì¹˜ë§ˆí¬ ë¬¸ì œ ì˜ˆì‹œ\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\níˆ¬ìíŒ€ì¥ ë¬¸ì œ 1ë²ˆ\n\nì‚¼ì„±ì „ì í˜„ì¬ PER 13ë°°\në°˜ë„ì²´ ì—…ì¢… í‰ê·  PER 15ë°°\nìµœê·¼ 3ê°œì›” ì£¼ê°€ -12%\nì˜ì—…ì´ìµ ì „ë…„ ëŒ€ë¹„ +40%\n\nBLUF í˜•ì‹ìœ¼ë¡œ\në‹¨ê¸° 1ë‹¬ / ì¤‘ê¸° 3ë‹¬ / ì¥ê¸° 1ë…„\níˆ¬ìì˜ê²¬ê³¼ ëª©í‘œê°€ë¥¼ ì œì‹œí•˜ì‹œì˜¤"]

    Q --> RUN4["4ê°œ ì†Œìš¸ë¡œ ê°ê° ì‹¤í–‰\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nì›ë³¸ ì†Œìš¸ â†’ ë‹µë³€ ì›ë³¸\nVariant A ì†Œìš¸ â†’ ë‹µë³€ A\nVariant B ì†Œìš¸ â†’ ë‹µë³€ B\nVariant C ì†Œìš¸ â†’ ë‹µë³€ C"]

    RUN4 --> JUDGE_PROMPT["Sonnet ì±„ì \nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nBLUF í˜•ì‹ 20ì \nê²°ë¡ ì´ ì²« ì¤„ì— ìˆëŠ”ê°€\n\nì „ë¬¸ì„± 30ì \nPER PBR ìˆ˜ì¹˜ ì •í™•í•œê°€\nê¸ˆìœµ ë…¼ë¦¬ê°€ ë§ëŠ”ê°€\n\nêµ¬ì²´ì„± 30ì \nëª©í‘œê°€ê°€ ìˆ«ìë¡œ ìˆëŠ”ê°€\nì‹œë‚˜ë¦¬ì˜¤ 3ê°œ ìˆëŠ”ê°€\n\nêµ¬ì¡° 20ì \nê°€ë…ì„± í‘œ í•­ëª© êµ¬ë¶„"]

    JUDGE_PROMPT --> SCORES["ì±„ì  ê²°ê³¼\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nì›ë³¸   63ì \nVariant A   79ì  â† ìµœê³ \nVariant B   71ì \nVariant C   68ì "]

    SCORES --> AVG["ë¬¸ì œ 3ê°œ í‰ê· \nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nì›ë³¸ í‰ê·    65ì \nVariant A í‰ê·    77ì  â† ì±„íƒ í›„ë³´\nVariant B í‰ê·    69ì \nVariant C í‰ê·    66ì \n\nê°œì„ í­ +12ì  â†’ í…”ë ˆê·¸ë¨ ìŠ¹ì¸ ìš”ì²­"]

    style SCORES fill:#1a2e1a,color:#e0ffe0,stroke:#4ae24a
    style AVG fill:#1a2e1a,color:#e0ffe0,stroke:#4ae24a
    style JUDGE_PROMPT fill:#1a1a2e,color:#e0e0ff,stroke:#4a90e2
```

---

## 4. ê¸°ì¡´ ì‹œìŠ¤í…œê³¼ ê´€ê³„ (ì¶©ëŒ ì—†ìŒ)

```mermaid
flowchart LR
    subgraph OLD["âš¡ ê¸°ì¡´ Soul Evolution\nì¼ìš”ì¼ 03:00\nê±´ë“œë¦¬ì§€ ì•ŠìŒ"]
        W["warnings ìŒ“ì„\nì‹¤ìˆ˜í•  ë•Œë§ˆë‹¤ ê¸°ë¡"] --> SE["íŒ¨í„´ ë¶„ì„\nâ†’ ëŒ€í‘œë‹˜ ì œì•ˆ\nâ†’ ìŠ¹ì¸ ì‹œ ì ìš©"]
    end

    subgraph NEW["ğŸ§¬ ì‹ ê·œ Soul Gym\nì›”ìš”ì¼ 03:00\nì´ë²ˆì— ìƒˆë¡œ ë§Œë“œëŠ” ê²ƒ"]
        QA["QA ì ìˆ˜ ë‚®ì€ íŒ€ì¥\nìë™ ì„ ë³„"] --> SG["ê²½ê¸°ë¡œ ì§ì ‘ ì¦ëª…\nì›ë³¸ vs ë³€ì´ 3ê°œ\nâ†’ ìµœê³  ì ìˆ˜ ì±„íƒ"]
    end

    SE --> DB[("DB\nsoul_ì—ì´ì „íŠ¸ID\ní•˜ë‚˜ì˜ ì €ì¥ì†Œ")]
    SG --> DB

    DB --> AGENT["ì—ì´ì „íŠ¸\në‹¤ìŒ ë¶„ì„ ì‹œ\nìµœì‹  ì†Œìš¸ ì‚¬ìš©"]

    style OLD fill:#1a1a2e,stroke:#4a90e2,color:#e0e0ff
    style NEW fill:#1a2e1a,stroke:#4ae24a,color:#e0ffe0
    style DB fill:#2e1a2e,stroke:#e24ae2,color:#ffe0ff
```

---

## 5. Phaseë³„ êµ¬í˜„ ê³„íš

| Phase | íŒŒì¼ | ì‘ì—… | ê·œëª¨ |
|-------|------|------|------|
| **1** | `web/db.py` | `soul_gym_rounds` í…Œì´ë¸” ì¶”ê°€ + í•¨ìˆ˜ 2ê°œ | +50ì¤„ |
| **2** | `config/soul_gym_benchmarks.yaml` | 6ë¶€ì„œ Ã— 3ë¬¸í•­ ë²¤ì¹˜ë§ˆí¬ (ì‹ ê·œ) | ìƒˆ íŒŒì¼ |
| **3** | `web/soul_gym_engine.py` | í•µì‹¬ ì§„í™” ì—”ì§„ 5ê°œ í•¨ìˆ˜ (ì‹ ê·œ) | ~300ì¤„ |
| **4** | `web/handlers/soul_gym_handler.py` | API ì—”ë“œí¬ì¸íŠ¸ 5ê°œ (ì‹ ê·œ) | ~100ì¤„ |
| **5** | `web/arm_server.py` | í¬ë¡  3ì¤„ + include_router 2ì¤„ | +5ì¤„ |
| **6** | `web/templates/index.html` | ì „ë ¥ë¶„ì„ íƒ­ Soul Gym ì„¹ì…˜ | +80ì¤„ |
| **7** | ì„œë²„ í…ŒìŠ¤íŠ¸ | Dry Run â†’ ê²°ê³¼ í™•ì¸ â†’ ì‹¤ì œ ì‹¤í–‰ | ê²€ì¦ |

---

## 6. ë¹„ìš© ì‹œë®¬ë ˆì´ì…˜

| í•­ëª© | ëª¨ë¸ | 1ëª…ë‹¹ ë¹„ìš© |
|------|------|-----------|
| ë³€ì´ A/B/C ìƒì„± | Haiku | ~$0.15 |
| ë²¤ì¹˜ë§ˆí¬ ì‹¤í–‰ (4ì†Œìš¸ Ã— 3ë¬¸í•­) | ì›ë³¸ ëª¨ë¸ | ~$3.60 |
| QA ì±„ì  (12íšŒ) | Sonnet | ~$2.40 |
| **íŒ€ì¥ 1ëª… í•©ê³„** | | **~$6** |
| ë¹„ìš© ìº¡ $10 ì ìš© ì‹œ | | **2ëª…ë§Œ ì§„í™”** |
| ë¹„ìš© ìº¡ $20 ì ìš© ì‹œ | | **3~4ëª… ì§„í™”** |
