# 멀티에이전트 브로드캐스트 + 상태 표시등 + 자동 스크롤

## 버전
0.10.000

## 작업 날짜
2026-02-16

## 작업 브랜치
claude/fix-multi-provider-ai-chat

## 빌드 번호
#129

## 변경 사항 요약

### 새로 추가된 기능

1. **브로드캐스트 모드 (6개 부서 동시 호출)**
   - "전체", "출석체크", "회의", "현황 보고" 같은 키워드를 입력하면 6개 부서(CTO, CSO, CLO, CMO, CIO, CPO) 처장에게 동시에 명령 전달
   - `asyncio.gather`로 병렬 처리 → 6번 순차 호출 대비 약 5배 빠름
   - 각 부서의 응답이 하나의 보고서로 합쳐져서 CEO에게 전달됨
   - 예시: "전체 현황 보고해" → 6개 부서가 동시에 각자 보고서 작성 → 한 번에 결과 표시

2. **에이전트 상태 표시등 (초록불 깜빡임)**
   - 에이전트가 작업 중일 때 사무실 뷰의 상태 표시등(초록불)이 깜빡임
   - 비서실장이 위임하면 비서실장 불빛 + 담당 부서 불빛이 동시에 깜빡임
   - 작업 완료되면 불빛이 안정 상태로 전환 → 5초 후 원래대로 돌아감
   - WebSocket `agent_status` 이벤트로 실시간 전송

3. **자동 스크롤 안정화**
   - 메시지 보낼 때, 결과 받을 때, 대화 복원할 때 채팅창이 자동으로 맨 아래로 스크롤
   - 마크다운 렌더링 후에도 추가 스크롤 실행 (시간차 적용)

4. **처장 → 전문가 매핑 테이블**
   - 각 처장 아래 소속 전문가 목록이 코드에 정의됨
   - 추후 처장이 전문가에게 하위 위임하는 기능의 기반

### 수정한 파일

| 파일 | 설명 |
|------|------|
| `web/mini_server.py` (백엔드 서버) | 브로드캐스트 시스템, 상태 이벤트 전송, 처장-전문가 매핑 추가 |
| `web/templates/index.html` (웹 화면) | 자동 스크롤 안정화, 작업 완료 시 에이전트 상태 정리 |

## 현재 상태
- 브로드캐스트 + 상태 표시등 + 자동 스크롤 구현 완료
- 빌드 #129 서버 배포 완료

## 다음에 할 일
- 처장 → 전문가 하위 위임 (단순 위임이 아닌 전문가 활용)
- 품질 검수 시스템 (처장이 전문가 결과를 검토)
- 보고 체계 (전문가 → 처장 → 비서실장 → CEO 보고 흐름)
