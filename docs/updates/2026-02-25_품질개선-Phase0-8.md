# 2026-02-25 블라인드 채점 기반 품질 개선 (Phase 0~8)

> 블라인드 채점 결과(4.07/5.0 A등급) 분석 → 9개 Phase 구현

## 변경 요약

### Phase 0: 아키텍처 문서 + CLAUDE.md
- 6개 아키텍처 문서 (`docs/architecture/quality-improvement/`)
- CLAUDE.md: 알고리즘/다이어그램 표준 규칙
- CEO 아이디어 #008~#012 기록

### Phase 1: Soul/YAML (7개 파일)
- CIO soul: 비중 필수 + 스폰 규칙
- 전문가 4명 soul: BLUF 결론 먼저 + 도구 시점 KST + 차트 mermaid/표
- 종목분석 전용: 재작업 시 도구 재호출 필수
- 시황분석 전용: 종목 영향 연결 섹션
- quality_rules.yaml: D1 판정 보조 강화 (도구명+시점 → 5점)
- agents.yaml: CTO 5명 dormant: true

### Phase 2: 스폰 필터링
- cross_agent_protocol.py: 부서 기반 라우팅
  - 같은 부서 = 직접 스폰
  - 다른 부서 = 처장 경유 리다이렉트
  - dormant = 자동 차단
- arm_server.py: superior_id, dormant 필드 추가

### Phase 3: 반려/재작업/학습
- QA 불합격 시: 교신로그 + 기밀문서(반려사유) + warnings 학습 저장
- 재작업 프롬프트: 이전 보고서 전문 + 부분수정 지시
- 재작업 완료: 기밀문서(v2) + 활동로그

### Phase 4: 검수 로그 통합
- 항목별 개별 로그 → 전문가당 1건 통합
- 프론트: qa_detail 검수 탭 + 아이콘 구분

### Phase 5: 로그 소실
- 프론트 100→300건, DB 1,000→5,000건

### Phase 8: CIO 7단계 아카이브
- 독자분석 + 전문가 각각 기밀문서 저장

### 버그 발견 + 수정
- 재작업 도구 로그: _rw_agent_id(미정의) → _aid 수정

## 수정 파일

| 파일 | 변경 |
|------|------|
| souls/agents/cio_manager.md | 비중필수 + 스폰규칙 |
| souls/agents/stock_analysis_specialist.md | BLUF + 도구출력 + 차트 + 재작업 |
| souls/agents/technical_analysis_specialist.md | BLUF + 도구출력 + 차트 |
| souls/agents/risk_management_specialist.md | BLUF + 도구출력 + 차트 |
| souls/agents/market_condition_specialist.md | BLUF + 도구출력 + 차트 + 종목연결 |
| config/quality_rules.yaml | D1 판정 보조 강화 |
| config/agents.yaml | CTO 5명 dormant |
| src/tools/cross_agent_protocol.py | 부서 필터 + dormant + 처장 리다이렉트 |
| web/arm_server.py | 스폰필터 + 반려학습 + 검수로그 + 7단계 |
| web/static/js/corthex-app.js | 검수아이콘 + 로그300건 |
| web/db.py | DB 5,000건 |
| CLAUDE.md | 알고리즘/다이어그램 규칙 |
| docs/architecture/quality-improvement/* | 아키텍처 6개 |
| docs/ceo-ideas.md | #008~#012 |
