# CORTHEX HQ v0.5.0 업데이트 - 협업 리플레이 & CEO 피드백

**날짜**: 2026-02-13
**버전**: v0.5.0

---

## 1. 협업 리플레이 (Collaboration Replay)

### 개요
명령을 실행한 후, 어떤 에이전트가 어떤 순서로 협업했는지를 **트리 형태**로 시각화합니다.

### 사용법
- **CLI**: `리플레이` 또는 `replay` 입력
- **Web API**: `GET /api/replay/latest` (최근) 또는 `GET /api/replay/{correlation_id}` (특정 작업)

### 표시 정보
- 에이전트 이름, 역할
- 담당 업무 내용
- 결과 요약
- 성공/실패 여부 (✓/✗)
- 소요 시간

### 특징
- LLM 호출 없음 (추가 비용 0원) - 메시지 히스토리에서 순수 데이터 재구성
- 배치 API 사용 시에도 정상 동작

---

## 2. CEO 피드백 시스템

### 개요
결과를 받은 후 CEO가 **좋아/별로**로 평가하면, 에이전트별 만족도 통계가 자동 축적됩니다.

### 사용법
- **CLI**: 결과 확인 후 `좋아` (긍정) 또는 `별로` (부정) 입력
- **CLI 통계**: `피드백` 또는 `feedback` 입력
- **Web API**: `POST /api/feedback` (기록), `GET /api/feedback` (통계 조회)

### 피드백 API 형식
```json
POST /api/feedback
{
  "correlation_id": "xxx",
  "rating": "good",
  "comment": "잘했어",
  "agent_id": "chief_of_staff"
}
```

### 통계 제공 정보
- 전체 만족도 (%)
- 에이전트별 좋아/별로/만족도
- 최근 피드백 내역

### 특징
- JSON 파일 영구 저장 (`data/feedback.json`)
- LLM 호출 없음 (추가 비용 0원)
- "별로" 선택 시 개선 의견 입력 가능

---

## 변경 파일 요약

| 파일 | 변경 내용 |
|------|-----------|
| `src/core/replay.py` | 리플레이 트리 구성 모듈 (신규) |
| `src/core/feedback.py` | 피드백 기록/통계 모듈 (신규) |
| `src/cli/app.py` | 리플레이/피드백 CLI 명령 추가, 도움말 갱신, v0.5.0 |
| `web/app.py` | 리플레이/피드백 API 엔드포인트 추가, v0.5.0 |

---

## CLI 명령어 전체 목록 (v0.5.0)

| 명령 | 설명 |
|------|------|
| 자연어 입력 | 업무 명령 |
| 조직도 / org | 조직 구조 표시 |
| 비용 / cost | API 비용 확인 |
| 예산 / budget | 토큰 예산 현황 |
| 헬스체크 / health | 시스템 진단 |
| 성과 / performance | 에이전트 성과 |
| **리플레이 / replay** | **협업 과정 시각화** (NEW) |
| **피드백 / feedback** | **만족도 통계** (NEW) |
| **좋아 / good** | **긍정 피드백** (NEW) |
| **별로 / bad** | **부정 피드백** (NEW) |
| 프리셋 목록/저장/삭제 | 명령 프리셋 관리 |
| 도움말 / help | 도움말 |
| 종료 / exit | 종료 |
