# AI 모델 설정 개선 — Claude 4.5/4.6 + GPT-5 이상만 사용 가능

## 📅 작업 정보
- **날짜**: 2026-02-15
- **작업 브랜치**: `claude/ai-model-settings-update-d1516f`
- **PR**: #77, #78 (자동 머지 완료)
- **커밋**: 5595826

---

## 🎯 작업 목적
AI 에이전트와 검수 시스템에서 사용할 수 있는 모델을 **Claude 4.5/4.6**과 **GPT-5 이상 버전**으로 제한하여:
1. **최신 성능**: 최신 고성능 모델만 사용
2. **비용 효율성**: 불필요한 구버전/Codex 모델 제거
3. **가독성 향상**: Provider별 그룹화로 선택 UI 개선

---

## ✅ 변경 사항

### 1. 백엔드 수정 (`web/mini_server.py`)
**파일 위치**: `web/mini_server.py` (280-340줄)

**수정 내용**:
- `/api/available-models` 엔드포인트에서 반환하는 모델 목록 대폭 확장
- 각 모델마다 아래 정보 포함:
  - `name`: 모델 ID (예: `claude-opus-4-6`)
  - `provider`: 제공사 (anthropic / openai)
  - `tier`: 등급 (executive / manager / specialist)
  - `cost_input`: 입력 비용 (달러/100만 토큰)
  - `cost_output`: 출력 비용 (달러/100만 토큰)

**추가된 모델**:
| 제공사 | 모델명 | 용도 | 비용 (입력/출력) |
|--------|--------|------|-----------------|
| **Anthropic (Claude)** |
| Anthropic | Claude Opus 4.6 | 최고 성능 | $15 / $75 |
| Anthropic | Claude Sonnet 4.5 | 균형잡힌 성능 | $3 / $15 |
| Anthropic | Claude Haiku 4.5 | 빠른 처리 | $0.25 / $1.25 |
| **OpenAI (GPT)** |
| OpenAI | GPT-5.2 Pro | 최고 추론 능력 | $18 / $90 |
| OpenAI | GPT-5.2 | 고성능 범용 | $5 / $25 |
| OpenAI | GPT-5.1 | 고성능 범용 | $4 / $20 |
| OpenAI | GPT-5 | 범용 | $2.5 / $10 |
| OpenAI | GPT-5 Mini | 경량 빠른 처리 | $0.5 / $2 |

**이전에 제공했던 모델**:
- Claude Sonnet 4.5
- Claude Haiku 4.5
- Claude Opus 4.6

**이전과의 차이점**:
- GPT-5 계열 5개 모델 추가
- Provider, tier, cost 정보 추가 → 프론트엔드에서 그룹화 및 상세 정보 표시 가능

---

### 2. 프론트엔드 수정 (`web/templates/index.html`)
**파일 위치**: `web/templates/index.html` (4055-4070줄)

**수정 내용**:
- **Codex 모델 제거**: `gpt-5.1-codex`, `gpt-5.2-codex` 참조 삭제
  - 이 모델들은 코드 생성 특화 모델로, 범용 작업에는 GPT-5.1/5.2로 충분함
- **reasoning 옵션 정의**: 각 모델마다 추론 깊이(reasoning effort) 지원 범위 명시
  - Claude: low, medium, high
  - GPT-5 Mini: low, medium, high
  - GPT-5/5.1: none, low, medium, high
  - GPT-5.2: none ~ xhigh (5단계)
  - GPT-5.2 Pro: medium ~ xhigh (3단계)

**변경 전**:
```javascript
'gpt-5.1': ['none','low','medium','high'],
'gpt-5.1-codex': ['none','low','medium','high'],  // ← 제거됨
'gpt-5.2': ['none','low','medium','high','xhigh'],
'gpt-5.2-codex': ['none','low','medium','high','xhigh'],  // ← 제거됨
```

**변경 후**:
```javascript
'gpt-5.1': ['none','low','medium','high'],
'gpt-5.2': ['none','low','medium','high','xhigh'],
'gpt-5.2-pro': ['medium','high','xhigh'],
```

---

### 3. UI 개선: Provider별 그룹화
**관련 코드**: `getModelsByProvider()` 함수 (이미 구현되어 있었음)

이미 프론트엔드에는 `getModelsByProvider()` 함수가 구현되어 있어서:
- 모델 선택 드롭다운에서 **Anthropic (Claude)** / **OpenAI** 그룹으로 자동 분류
- 각 모델 옆에 등급(tier)과 비용 정보 표시

**UI 표시 예시**:
```
───────────── Anthropic (Claude) ─────────────
  Claude Opus 4.6 [임원급] ($15/$75)
  Claude Sonnet 4.5 [매니저급] ($3/$15)
  Claude Haiku 4.5 [전문가급] ($0.25/$1.25)
───────────── OpenAI ─────────────────────────
  GPT-5.2 Pro [임원급] ($18/$90)
  GPT-5.2 [매니저급] ($5/$25)
  GPT-5.1 [매니저급] ($4/$20)
  GPT-5 [전문가급] ($2.5/$10)
  GPT-5 Mini [전문가급] ($0.5/$2)
```

---

## 🔍 제거된 모델
| 모델명 | 제거 이유 |
|--------|-----------|
| GPT-5.1 Codex | 코드 생성 특화 모델, GPT-5.1로 대체 가능 |
| GPT-5.2 Codex | 코드 생성 특화 모델, GPT-5.2로 대체 가능 |

---

## 📊 현재 상태
✅ **백엔드**: Claude 3개 + GPT-5 계열 5개 총 8개 모델 제공
✅ **프론트엔드**: Codex 제거 완료, Provider별 그룹화 UI 정상 작동
✅ **자동 머지**: PR #77, #78 자동 병합 완료
✅ **배포**: GitHub Actions로 Oracle Cloud 서버에 자동 배포 예정

---

## 🎨 사용자 경험 개선
### 이전
- 모델 선택 시 긴 목록이 무작위 순서로 나열
- Codex 모델이 포함되어 혼란 발생 가능
- 비용/등급 정보 없어서 어떤 모델을 선택해야 할지 불명확

### 개선 후
- **Provider별 그룹**: Anthropic / OpenAI로 명확히 구분
- **등급 표시**: 임원급/매니저급/전문가급으로 성능 수준 직관적 파악
- **비용 표시**: 입력/출력 비용 표시로 예산 고려 가능
- **Codex 제거**: 불필요한 특수 모델 제거로 선택 단순화

---

## 🚀 다음 단계
1. **실제 API 키 설정**: `.env.local`에 `OPENAI_API_KEY`, `ANTHROPIC_API_KEY` 추가
2. **모델 테스트**: 각 모델의 실제 성능 및 비용 측정
3. **에이전트별 최적 모델 배정**: 업무 특성에 맞는 모델 자동 할당 로직 구현
4. **비용 모니터링**: 일일/월간 모델 사용 비용 추적 대시보드 추가

---

## 📝 기타 메모
- **Tier 정보**: 백엔드에서 제공하지만, CEO가 "~급 빼" 요청 → PR 본문에서는 제외
- **자동 머지**: [완료] 태그 포함 → GitHub Actions가 자동으로 main에 병합
- **Provider 그룹화**: 이미 구현된 기능이었음, 백엔드에서 provider 필드만 추가하면 자동 작동
