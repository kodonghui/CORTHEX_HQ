# 캘린더 도구 OAuth 전환 + 텔레그램 자동 보고 — 2026-02-21

## 기본 정보
- **날짜**: 2026-02-21
- **버전**: 3.02.016
- **브랜치**: claude/fix-corthex-bugs-v9a3P
- **빌드**: 배포 후 갱신

## 변경 사항

### 🔧 수정한 것
| 파일 | 수정 내용 (CEO가 이해할 수 있게 쉽게) |
|------|-------------------------------------|
| `web/arm_server.py` | 웹에서 에이전트가 답변하면 → 텔레그램으로 자동 전달되도록 추가 |
| `web/arm_server.py` | 토론 결과도 텔레그램으로 자동 전달되도록 추가 |
| `web/arm_server.py` | Google Calendar OAuth 연동 엔드포인트 3개 추가 (setup/callback/status) |
| `web/arm_server.py` | `RedirectResponse` import 추가 |
| `src/tools/calendar_tool.py` | 파일 기반 인증 → DB 저장 OAuth 토큰 방식으로 전환 |

### 🐛 발견한 버그 (수정 여부 무관하게 전부 기록!)
| 버그 | 원인 | 상태 |
|------|------|------|
| 캘린더 도구 에러 | `GOOGLE_CALENDAR_CREDENTIALS` 환경변수(파일경로)가 없어서 즉시 실패 | ✅ 수정 완료 (OAuth로 전환) |
| 웹 채팅 응답이 텔레그램으로 안 옴 | 텔레그램 전송 코드 자체가 없었음 (배치만 있고 실시간 응답은 빠짐) | ✅ 수정 완료 |
| 캘린더 OAuth 최초 인증 미완료 | CEO가 `/api/google-calendar/setup` 방문하여 Google 로그인 필요 | 🔴 CEO 조치 필요 |

### 📊 현재 상태
- 캘린더 도구: OAuth 코드 준비 완료. CEO가 `corthex-hq.com/api/google-calendar/setup` 한 번 방문하면 활성화
- 텔레그램 자동 보고: 웹 채팅 에이전트 응답 + 토론 결과 → CEO 텔레그램 자동 전달

### 📋 다음에 할 일
- CEO Google Calendar OAuth 인증 (링크 클릭 한 번)
- 텔레그램 메시지 포맷 세부 조정 (필요 시)
