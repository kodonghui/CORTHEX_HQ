# 다크모드 가시성 버그 최종 수정 — gridPulse 애니메이션이 범인

## 버전
0.05.049

## 작업 날짜
2026-02-15

## 작업 브랜치
claude/fix-allowed-tools-logic-943fa2

---

## 변경 사항 요약

### 한 줄 요약
> 배경 격자 무늬를 살짝 깜빡이게 하는 효과(`gridPulse`)가 **콘텐츠 전체의 투명도를 3%로** 만들어서 화면이 안 보이던 문제를 수정했습니다.

### 뭘 했는지
웹 화면의 모든 탭(12개)에서 글자, 카드, 버튼 등 모든 요소가 거의 안 보이는 문제의 근본 원인을 찾아 수정했습니다.

### 핵심 발견 (문제의 원인)

**범인: `gridPulse` CSS 애니메이션**

```css
/* 이 애니메이션은 배경 격자 무늬를 살짝 깜빡이게 하려고 만든 것 */
@keyframes gridPulse {
  0%, 100% { opacity: 0.03; }    ← 투명도 3% (거의 안 보임!)
  50% { opacity: 0.06; }          ← 투명도 6% (거의 안 보임!)
}

/* 이 애니메이션이 .bg-grid 요소 전체에 적용되어 있었음 */
.bg-grid {
  animation: gridPulse 8s ease-in-out infinite;  ← 문제!
}
```

CSS의 `opacity`(투명도) 속성은 **요소 전체**에 적용됩니다. 배경 무늬만 깜빡이게 하려고 만든 효과가, 실제로는 그 안에 있는 **글자, 카드, 버튼, 아이콘 등 모든 것**을 투명도 3%로 만들었습니다.

그리고 이 `.bg-grid` 클래스가 **12개 메인 콘텐츠 영역 전부**에 붙어있어서, 어떤 탭을 클릭해도 내용이 안 보였습니다:

| 영향받은 영역 | 설명 |
|--------------|------|
| 홈 탭 | 통계 카드, 텍스트 전부 투명 |
| 명령(채팅) 탭 | 대화 내용, 입력창 전부 투명 |
| 성능 탭 | 차트, 지표 전부 투명 |
| 사무실 뷰 | 에이전트 배치도 전부 투명 |
| 대시보드 뷰 | 모니터링 카드 전부 투명 |
| 작업내역 탭 | 작업 목록 전부 투명 |
| 예약 탭 | 예약 목록 전부 투명 |
| 워크플로우 탭 | 워크플로우 목록 전부 투명 |
| 활동 로그 탭 | 로그 목록 전부 투명 |
| 지식 탭 | 지식 베이스 전부 투명 |
| 아카이브 탭 | 아카이브 목록 전부 투명 |
| SNS 탭 | SNS 현황 전부 투명 |

### 어떻게 고쳤는지

격자 무늬를 **가상 요소(::before)**로 분리해서, 애니메이션이 배경 패턴에만 적용되고 콘텐츠에는 영향을 주지 않도록 수정했습니다.

**수정 전:**
```css
.bg-grid {
  background-image: 격자 무늬;
  animation: gridPulse;  ← 요소 전체(콘텐츠 포함)에 opacity 적용!
}
```

**수정 후:**
```css
.bg-grid {
  position: relative;  ← 위치 기준점만 설정
}
.bg-grid::before {    ← 격자 무늬는 가상 요소로 분리
  background-image: 격자 무늬;
  animation: gridPulse;  ← 가상 요소에만 opacity 적용! (콘텐츠 영향 없음)
  pointer-events: none;  ← 클릭 안 막히게
  z-index: 0;            ← 콘텐츠 아래에 위치
}
.bg-grid > * {
  position: relative;
  z-index: 1;            ← 콘텐츠는 격자 무늬 위에 표시
}
```

### 왜 이 문제가 반복됐는지

이전에 다크모드 가시성 문제를 "색상"으로 접근해서 수정했지만, 실제 원인은 "투명도"였습니다. 색상을 아무리 바꿔도 `opacity: 0.03`이면 어떤 색이든 안 보입니다. 이번에 근본 원인을 찾아서 해결했습니다.

---

## 수정한 파일

| 파일 | 뭘 바꿨는지 |
|------|------------|
| `web/templates/index.html` (웹 화면) | `.bg-grid` CSS를 `::before` 가상 요소 방식으로 변경 (15줄 추가, 1줄 제거) |
| `docs/project-status.md` (프로젝트 현황) | 다크모드 해결 완료 반영 |

---

## 현재 상태
- 다크모드 가시성 문제 **완전 해결**
- 커밋 + 푸시 완료 → 자동 머지 + 자동 배포 진행 중

## 다음에 할 일
1. 배포 완료 후 웹 화면(http://168.107.28.100)에서 가시성 확인
2. 미니서버 기능 확장 (설정 파일 읽기 기능 추가)
