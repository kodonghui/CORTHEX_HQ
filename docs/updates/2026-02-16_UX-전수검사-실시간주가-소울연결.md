# UX 전수검사 + 실시간 주가 + 소울 연결 + 보고서 글씨체

## 버전
0.12.003

## 작업 날짜
2026-02-16

## 작업 브랜치
claude/fix-multi-provider-ai-chat

## 빌드
#137 (실시간 주가) → #138 (UX 전수검사)

---

## 변경 사항 요약

### 1. 관심종목 실시간 주가 표시 (빌드 #137)
- **뭘 바꿨나**: 관심종목 카드에 실제 현재가, 등락률(▲▼), 고가/저가/거래량이 표시됩니다
- **목표가 vs 현재가**: 진행률 바(프로그레스 바)로 목표가까지 얼마나 남았는지 한눈에 보임
- **30일 차트**: 관심종목 카드의 📈 버튼 누르면 최근 30일 가격 변동 그래프가 나옴
- **무료 데이터**: 한국 주식은 pykrx(한국거래소), 미국 주식은 yfinance(야후 파이낸스) — 둘 다 무료
- **수정 파일**: `web/arm_server.py` (2개 API 추가), `web/templates/index.html` (카드 UI)

### 2. UX 전수검사 (빌드 #138)

#### 버그 수정
| 문제 | 원인 | 해결 |
|------|------|------|
| AGENTS 숫자 비어있음 | 프론트엔드에서 데이터를 변수에 안 넣음 | `agentsList` 변수 추가, 데이터 저장 코드 추가 |
| WEAPONS 숫자 비어있음 | 같은 원인 | `toolsList`에 데이터 저장 코드 추가 |

#### 이름 통일 (헷갈리는 것 제거)
| 이전 (영어) | 이후 (한국어) |
|------------|-------------|
| AUTO TRADING : STANDBY | CIO 자동매매 : 대기 |
| AUTO TRADING : ACTIVE | CIO 자동매매 : 가동 중 |
| 🤖 AI 시그널 생성 | 📊 CIO 분석 요청 |
| TOTAL ASSET | 총 자산 |
| CASH | 보유 현금 |
| TODAY TRADES | 오늘 거래 |
| STRATEGIES | 매매 전략 |
| HOLDINGS | 보유 종목 |
| RECENT TRADES | 최근 거래 |
| RECENT SIGNALS | 최근 CIO 시그널 |
| ORDER | 주문 실행 |
| NEW STRATEGY | 새 매매 전략 |
| ADD WATCHLIST | 관심종목 추가 |
| TRADING SETTINGS | 자동매매 설정 |
| UNITS STANDING BY | 에이전트 대기 중 |
| INTEL FILES | 참고 자료 |

#### 카드 디자인 통일
- 보유 종목, 최근 거래, 시그널 카드에도 초록색/시안색 글로우(빛나는 테두리) 추가
- 이전에는 위쪽 4개 카드만 글로우가 있었음 → 전체 통일

#### 보고서 글씨체 개선
- 기존: 모노스페이스(코딩용 글꼴) — 딱딱하고 읽기 어려움
- 변경: 본문은 **Noto Serif KR** (명조체, 고급스러운 느낌), 제목은 **Pretendard** (깔끔한 고딕)
- 표는 Pretendard로, 인용구는 배경색 추가
- h1에 밑줄, h2는 보라색, h3는 시안색으로 색상 구분

#### 에이전트 소울 연결
- `souls/agents/*.md` 파일 (29개)이 웹에서 안 보이던 문제 해결
- 이제 웹에서 에이전트 설정 > 소울 탭을 열면 `.md` 파일의 풍부한 캐릭터 설정이 자동으로 표시됨
- 우선순위: ① DB에 저장된 소울 → ② souls/agents/*.md 파일 → ③ agents.yaml 기본값

#### 작전일지 UX 개선
- **제목/내용 클릭으로 펼치기**: 이전에는 "펼치기" 버튼만 있었는데, 이제 작업 제목이나 내용 아무 곳이나 클릭하면 상세 내용이 펼쳐짐
- **삭제 버튼 추가**: 각 작업 옆에 🗑️ 버튼 (삭제 전 확인 팝업 있음)
- **태그 표시**: 태그가 달린 작업은 날짜 옆에 태그 배지가 표시됨
- **펼침 안내**: "▼ 눌러서 상세 보기" 텍스트로 클릭 가능하다는 걸 알려줌

---

## 수정 파일 목록
| 파일 | 설명 |
|------|------|
| `web/arm_server.py` | 실시간 주가 API 2개 추가, 소울 로드 로직 변경, 관심종목 market 필드 저장 |
| `web/templates/index.html` | 관심종목 카드 업그레이드, 차트 모달, UX 전수검사 전체 반영 |

## 현재 상태
- ✅ 빌드 #138 배포 완료
- ✅ 모든 수정사항 반영됨

## 다음에 할 일
- 키움증권 Open API+ 연동 (실시간 캔들차트용)
- 피드백(👍👎) 데이터를 에이전트 소울에 반영하는 기능
- 작전일지에 태그 추가/편집 UI
