# 6가지 추가 수정 — 시스템상태 버그 + 작전일지 UX + 자동화 실행창

## 버전
1.05.002

## 작업 날짜
2026-02-17

## 작업 브랜치
claude/fix-multi-provider-ai-chat

## 변경 사항 요약

CEO가 보고한 5가지 이슈(+1가지 추가)를 모두 수정했습니다.

### 수정된 파일
| 파일 | 역할 | 변경 내용 |
|------|------|----------|
| `web/templates/index.html` (웹 화면) | 프론트엔드 전체 | 5가지 작전일지/대시보드 UX 수정 + 자동화 실행창 |
| `web/arm_server.py` (백엔드 서버) | API + WebSocket | 시스템 상태 수정 + 일괄 작업 API + 워크플로우 진행 알림 |

### 수정 상세

| # | 문제 | 원인 | 해결 |
|---|------|------|------|
| 1 | **대시보드 "시스템 상태: 이상" 항상 빨간불** | 서버가 `"idle"` 을 보내는데 화면은 `"ok"` 만 인식 | 서버가 `"ok"`를 보내도록 수정 + 화면에 3가지 상태 추가 (정상=초록/작업중=주황/이상=빨강) |
| 2 | **작전일지에 `**` 마크다운 기호가 그대로 보임** | 요약 줄이 `x-text`(일반 텍스트)로 표시 → 마크다운 변환 안 됨 | `stripMarkdown()` 함수 추가. 요약에서 `**`, `##`, `` ` `` 등 기호를 자동으로 벗겨서 깔끔하게 표시 |
| 3 | **작전일지 ★×□ 버튼이 안 보임** | 버튼 색상이 투명도 30%로 너무 희미 | 평소에는 숨기고, 카드에 마우스 올리면 밝아지는 호버 효과 적용 |
| 4 | **작전일지 □ 체크박스가 뭔지 모르겠음** | 흰색 네모 기본 체크박스 + 비교 전용이라 불명확 | 동그란 선택 버튼(○→●)으로 변경 + 멀티셀렉트 액션바 추가 (삭제/북마크/태그/보관 일괄 작업) + 전체 선택 버튼 + "보관" 필터 추가 |
| 5 | **자동화 탭 "실행" 결과를 볼 수 없음** | 결과가 작은 박스에만 표시되고 진행 상태 모름 | 전용 실행창 모달 추가 — 배치/실시간 모드 선택 + 단계별 진행 상태 실시간 표시 + WebSocket으로 진행 알림 |
| 6 | **일괄 작업 백엔드 API 없음** | — | `/api/tasks/bulk` API 추가 (삭제/북마크/태그/보관 4가지 액션) |

### 작전일지 멀티셀렉트 상세

**변경 전**:
- □ 흰색 네모 체크박스 → 뭔지 모르겠음
- 2개만 선택 가능 (비교 전용)
- 일괄 작업 불가

**변경 후**:
- ○ 동그란 선택 버튼 → 클릭하면 ● 파란 원 + 체크 표시
- 무제한 선택 가능
- 선택하면 상단에 액션바 표시: "N개 선택됨 [★북마크] [#태그] [보관] [삭제] [선택 해제]"
- 전체 선택 버튼 (액션바 왼쪽)
- 필터에 "보관" 추가 → 보관한 작업을 다시 볼 수 있음

### 자동화 워크플로우 실행창 상세

**변경 전**:
- "실행" 클릭 → 아래에 작은 결과 박스만 표시 → 진행 모름

**변경 후**:
- "실행" 클릭 → 전용 팝업 모달 열림
- 모달 안에서:
  - 실시간/배치 모드 선택
  - 각 단계별 진행 상태 (대기→실행중→완료/실패)
  - 실시간 모드: 단계 완료될 때마다 결과 바로 표시
  - 배치 모드: 전부 끝나면 최종 결과 한꺼번에 표시
  - "실행" / "다시 실행" / "닫기" 버튼

## 현재 상태
6가지 수정 완료. 커밋 + 푸시 대기 중.

## 다음에 할 일
- 대시보드에서 "정상" 초록불 확인
- 작전일지 요약에 마크다운 기호 안 보이는지 확인
- 작전일지 카드에 마우스 올려서 버튼 밝아지는지 확인
- 작전일지 동그란 선택 버튼 + 멀티셀렉트 액션바 확인
- 자동화 탭에서 워크플로우 "실행" 시 전용 실행창 열리는지 확인
