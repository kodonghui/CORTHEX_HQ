# 사이버 사령부 UI 대개편 + 백엔드 대규모 기능 추가

## 버전
0.11.000

## 작업 날짜
2026-02-16

## 작업 브랜치
claude/fix-multi-provider-ai-chat

---

## 변경 사항 요약

### 1. 사이버 사령부 UI 대개편 (프론트엔드)

전체 화면 디자인을 "Cyber Command Center" (사이버 사령부) 컨셉으로 완전히 바꿨습니다.

| 항목 | 이전 | 이후 |
|------|------|------|
| 배경 색상 | 보라색 어둡게 (#181622) | 깊은 검정 (#060810) + 네온 글로우 |
| 강조색 | 파랑/보라 그라데이션 | 네온 그린/시안/퍼플 (#00ff88, #00e6ff, #8c64ff) |
| 로고 | 파랑/보라 그라데이션 | 그린/시안/퍼플 그라데이션 |
| 대시보드 제목 | CORTHEX HQ 대시보드 | CYBER COMMAND CENTER |
| 웰컴 화면 | CORTHEX HQ | CYBER COMMAND + [ SYSTEM ONLINE ] |
| 로그인 화면 | CEO 관제실에 로그인하세요 | [ ACCESS RESTRICTED ] 인증이 필요합니다 |
| 보내기 버튼 | 파랑/보라 그라데이션 | 그린/시안 그라데이션 |

**탭 이름 변경 (10개 전부):**

| 이전 | 이후 |
|------|------|
| 홈 | 작전현황 |
| 명령 | 사령실 |
| 성능 | 전력분석 |
| 작업내역 | 작전일지 |
| 예약 | 크론기지 |
| 워크플로우 | 자동화 |
| 로그 | 통신로그 |
| 지식 | 정보국 |
| 아카이브 | 기밀문서 |
| SNS | 통신국 |

**사무실 뷰 변경:**
- CEO 사무실 → COMMAND CENTER
- 비서실 → STAFF OPS
- LEET Master 본부 → LEET MASTER HQ
- 투자분석 본부 → INVESTMENT HQ
- 도구 풀 → WEAPON POOL

**새 CSS 효과 추가:**
- `cyberGlow` — 네온 그린 박스 글로우 애니메이션
- `neonPulse` — 네온 텍스트 그림자 깜빡임
- `borderGlow` — 시안 테두리 글로우
- `scanLine` — 스캔라인 애니메이션
- `dataStream` — 데이터 스트림 배경 패턴

### 2. 백엔드 대규모 기능 추가

**db.py 변경:**
- `init_db()` 마이그레이션(이전에 만든 DB에 새 컬럼 자동 추가): `tags`, `is_read`, `archived` 컬럼
- `_row_to_task()` — 새 필드 호환성 유지
- 새 함수 6개: `delete_task()`, `bulk_delete_tasks()`, `bulk_archive_tasks()`, `set_task_tags()`, `mark_task_read()`, `bulk_mark_read()`
- `list_tasks()` — 아카이브/태그 필터 지원

**mini_server.py 변경:**
- **성능 API 실데이터** — 기존 빈 응답 대신 DB에서 에이전트별 실제 통계 집계(호출수, 완료수, 성공률, 비용, 평균시간)
- **작업 관리 API** (Gmail 스타일):
  - `DELETE /api/tasks/{id}` — 단일 삭제
  - `PUT /api/tasks/{id}/tags` — 태그 수정
  - `PUT /api/tasks/{id}/read` — 읽음/안읽음
  - `POST /api/tasks/bulk` — 대량 작업(삭제/아카이브/읽음 처리)
- **배치 명령** — `POST /api/batch` (순차/병렬 모드)
- **크론 실행 엔진** — 매 60초마다 예약된 작업 확인 후 자동 실행
- **워크플로우 실행 엔진** — 순차 단계 실행, 이전 단계 결과를 다음 단계 컨텍스트로 전달

### 3. 도구 실행 파이프라인 연결

- `MiniModelRouter` — `ask_ai()` 함수를 `ModelRouter` 인터페이스로 감싸는 어댑터
  - 기존 `src/tools/` 코드를 수정 없이 사용 가능
- `ToolPool` 서버 시작 시 자동 초기화 — 111개 도구 동적 로드
- `POST /api/tools/{tool_id}/execute` — 도구 직접 실행 API
- `GET /api/tools/status` — 로드된 도구 상태 확인 API
- 프로젝트 루트 `sys.path` 추가 — `src/` 모듈 임포트 지원

---

## 수정한 파일 목록

| 파일 | 설명 |
|------|------|
| `web/templates/index.html` | 프론트엔드 전체 화면 (사이버 사령부 UI 대개편) |
| `web/mini_server.py` | 백엔드 서버 (성능API/배치/크론/워크플로우/도구실행) |
| `web/db.py` | SQLite DB 계층 (마이그레이션/작업관리 함수 추가) |
| `docs/project-status.md` | 프로젝트 현재 상태 (이 세션 작업 내용 반영) |

---

## 현재 상태
- 코드 변경: **완료** (커밋 + 푸시 완료)
- 배포: **대기 중** ([완료] 커밋 후 자동 배포)

## 다음에 할 일
1. 키움증권 자동매매 시스템 프레임워크 구축
2. 노션 API 키 등록 + 보고 시스템 활성화
3. SNS API 연동 (인스타그램, 유튜브 등)
4. 소울 보강 (CEO 요청)
