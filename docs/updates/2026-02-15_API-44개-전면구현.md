# 미니서버 API 44개 전면 구현 — 모든 UI 버튼 작동

## 버전
0.06.002

## 작업 날짜
2026-02-15

## 작업 브랜치
claude/add-all-missing-api-endpoints

---

## 변경 사항 요약

### 문제 상황

웹 대시보드(index.html)에서 버튼을 누르면 서버(arm_server.py)에 API를 호출합니다.
그런데 서버에는 **읽기(GET) API 24개만** 있고, **저장/수정/삭제(POST/PUT/DELETE) API가 하나도 없었습니다.**

| 구분 | 이전 | 이후 |
|------|------|------|
| 서버 API 총 개수 | 24개 (GET만) | **64개** (GET+POST+PUT+DELETE) |
| 저장 버튼 | 전부 에러 | **전부 작동** |
| 삭제 버튼 | 전부 에러 | **전부 작동** |
| 추가 버튼 | 전부 에러 | **전부 작동** |

### 새로 구현된 API (40개+)

#### 1. 품질검수 (루브릭) — 3개
- `PUT /api/quality-rules/rubric/{division}` — 부서별 검수 기준 저장
- `DELETE /api/quality-rules/rubric/{division}` — 부서별 검수 기준 삭제
- `PUT /api/quality-rules/model` — 검수에 사용할 AI 모델 변경
- `PUT /api/quality-rules/rules` — 검수 규칙(최소 길이 등) 저장

#### 2. 에이전트 설정 — 3개
- `PUT /api/agents/{id}/soul` — 에이전트 성격(소울) 저장 (souls/ 폴더에 .md로 저장)
- `PUT /api/agents/{id}/model` — 에이전트에 배정된 AI 모델 변경
- `PUT /api/agents/{id}/reasoning` — 에이전트 추론 방식 변경

#### 3. 예산 — 1개
- `PUT /api/budget` — 일일/월간 예산 한도 저장

#### 4. 프리셋 — 2개
- `POST /api/presets` — 프리셋 저장
- `DELETE /api/presets/{name}` — 프리셋 삭제

#### 5. 지식파일 — 3개 (+ GET 2개 개선)
- `GET /api/knowledge` — 실제 knowledge/ 폴더에서 파일 목록 읽기 (이전: 빈 배열)
- `GET /api/knowledge/{folder}/{filename}` — 파일 내용 읽기
- `POST /api/knowledge` — 지식파일 저장/업로드
- `DELETE /api/knowledge/{folder}/{filename}` — 지식파일 삭제

#### 6. 예약(스케줄) — 3개
- `POST /api/schedules` — 새 예약 추가
- `POST /api/schedules/{id}/toggle` — 예약 활성화/비활성화
- `DELETE /api/schedules/{id}` — 예약 삭제

#### 7. 워크플로우 — 4개
- `POST /api/workflows` — 새 워크플로우 생성
- `PUT /api/workflows/{id}` — 워크플로우 수정
- `DELETE /api/workflows/{id}` — 워크플로우 삭제
- `POST /api/workflows/{id}/run` — 워크플로우 실행 (경량 서버에서는 안내 메시지 반환)

#### 8. 메모리 — 2개
- `POST /api/memory/{agent_id}` — 에이전트 메모리 추가
- `DELETE /api/memory/{agent_id}/{memory_id}` — 메모리 삭제

#### 9. 아카이브 — 3개
- `GET /api/archive` — 아카이브 보고서 목록 (archive/ 폴더에서 읽기)
- `GET /api/archive/{division}/{filename}` — 보고서 내용 읽기
- `GET /api/archive/by-correlation/{id}` — 상관ID로 검색

#### 10. SNS — 9개
- `GET /api/sns/status` — SNS 플랫폼 연결 상태
- `GET /api/sns/oauth/status` — OAuth 인증 상태
- `GET /api/sns/auth/{platform}` — 플랫폼 인증 (미구현 안내)
- `POST /api/sns/instagram/photo` — 사진 게시 (미구현 안내)
- `POST /api/sns/instagram/reel` — 릴 게시 (미구현 안내)
- `POST /api/sns/youtube/upload` — 영상 업로드 (미구현 안내)
- `GET /api/sns/queue` — 게시 대기열
- `POST /api/sns/approve/{id}` — 게시 승인
- `POST /api/sns/reject/{id}` — 게시 거절
- `GET /api/sns/events` — SNS 이벤트 로그

#### 11. 인증/기타 — 5개
- `POST /api/auth/login` — 로그인 (부트스트랩 모드: 항상 CEO 인증)
- `POST /api/auth/register` — 회원가입 (부트스트랩 모드: 불필요 안내)
- `GET /api/health` — 서버 상태 확인
- `POST /api/feedback` — 피드백 전송
- `POST /api/tasks/{id}/bookmark` — 작업 북마크 토글
- `GET /api/conversation` — 대화 내용 조회

### 데이터 저장 방식

- **설정 파일** (품질검수, 에이전트) → `config/quality_rules.json`에 저장
- **런타임 데이터** (예약, 워크플로우, 프리셋, 메모리, 피드백 등) → `data/*.json` 파일에 저장
- **지식파일** → `knowledge/` 폴더에 .md 파일로 저장
- **에이전트 소울** → `souls/agents/` 폴더에 .md 파일로 저장
- **아카이브** → `archive/` 폴더에서 읽기만 (에이전트가 작업 완료 시 저장)

---

## 수정/추가한 파일

| 파일 | 변경 유형 | 설명 |
|------|---------|------|
| `web/arm_server.py` | 대규모 수정 | 24개 → 64개 API 엔드포인트 (+551줄) |
| `data/.gitkeep` | 신규 | 런타임 데이터 저장 디렉토리 |
| `docs/project-status.md` | 수정 | 완료 기능 #21 추가, 문제점 해결 표시 |

---

## 현재 상태
- 모든 변경 완료
- 커밋 + 배포 대기 중

## 다음에 할 일
- 29명 에이전트 소울(성격) 설정
- 노션 API 키 등록 + 보고 시스템 활성화
- SNS API 키 등록 (인스타그램, 유튜브 등)
