# 에이전트 스킬(도구) 접근 권한 표시 수정

## 작업 날짜
2026-02-14

## 작업 브랜치
claude/fix-agent-skill-access-i6i6D

## 문제 상황
대시보드에서 에이전트 상세 정보를 열면, **모든 에이전트가 "모든 도구를 사용할 수 있습니다"**라고 잘못 표시되는 문제가 있었습니다.

실제로는 `config/agents.yaml` 설정 파일에 에이전트마다 사용 가능한 도구가 명확히 지정되어 있었으나, 배포 서버(arm_server.py)가 이 설정을 무시하고 빈 배열(`[]`)을 반환하고 있었습니다.

## 원인
| 파일 | 역할 | 문제 |
|------|------|------|
| `config/agents.yaml` | 에이전트별 허용 도구 설정 | 문제 없음 (올바르게 설정됨) |
| `web/app.py` (메인 서버) | 설정 파일을 읽어서 반환 | 문제 없음 |
| **`web/arm_server.py`** (배포 서버) | **항상 `allowed_tools: []`를 하드코딩**해서 반환 | **이게 원인!** |
| `web/templates/index.html` | 도구 이름 표시 함수 | `tool_id`가 아닌 `name`으로 검색 → 매칭 실패 |

## 변경 사항 요약

### 1. `web/arm_server.py` (배포용 경량 서버)
- **변경 전**: 모든 에이전트에 `allowed_tools: []`, `capabilities: []`을 하드코딩 반환
- **변경 후**: 서버 시작 시 `config/agents.yaml`과 `config/tools.yaml`을 1회 읽어서, 실제 데이터를 반환
- `/api/agents/{agent_id}`: 에이전트별 실제 `allowed_tools`, `capabilities`, `system_prompt` 등 반환
- `/api/tools`: 실제 도구 목록(65개+) 반환 (이전에는 빈 배열)

### 2. `web/templates/index.html` (대시보드 화면)
- `getToolDisplayName()`, `getToolDescription()` 함수에서 `tool_id`로도 매칭되도록 수정
- 변경 전: `t.name === toolId` (영어 이름으로만 검색 → 매칭 실패)
- 변경 후: `t.tool_id === toolId || t.name === toolId` (ID 또는 이름으로 검색)

## 현재 상태
- 수정 완료, 커밋 및 푸시 완료
- 배포 후 대시보드에서 에이전트별로 **실제 허용된 도구만** 표시됩니다
- 도구 이름도 한국어(`name_ko`)로 올바르게 표시됩니다

## 다음에 할 일
- 배포 후 대시보드에서 각 에이전트의 스킬 탭을 열어 올바른 도구 목록이 표시되는지 확인
