# 2026-03-02 — SketchVibe 버그 수정 + UX 전면 개편 (빌드 #779~#781)

## 버그 수정 3건

| 버그 | 증상 | 원인 | 수정 |
|------|------|------|------|
| Mermaid 렌더링 불가 | update_canvas 호출 시 다이어그램 미표시 | HTML div 닫기 태그 `>` 누락 → DOM 붕괴 | index.html:7572 `>` 추가 |
| SSE 단절 | 패널 닫으면 실시간 수신 끊김 | sketchVibeOpen=false 시 _disconnectSketchVibeSSE() 호출 | 패널 닫기와 SSE 분리 (NEXUS 닫을 때만 끊음) |
| 노드 안 보임 | 팔레트 클릭해도 캔버스에 노드 미표시 | 고정 좌표(300~500, 200~400) → 스크롤/줌 상태에 따라 화면 밖 배치 | canvas_x/y + zoom 반영해 현재 뷰포트 중앙에 배치 |
| + 새로 미반영 | 클릭해도 리스트에 항목 안 생김 | fetch 후 r.ok 체크 없음 → API 실패 무시 | r.ok 체크 추가 |

## UX 개편 (Sally UX 디자이너 설계)

### 모드 탭 추가
- ✏️ **내가 그리기** (Mode A): 손그림 → Claude 변환
- 🤖 **같이 그리기** (Mode B): 파일명+요청 → 세션 시작 → Claude Code 협업

### 버튼 위치 개선
- 맞아/초기화: 오버레이 좌상단 구석 → **하단 중앙 크게** 배치

### + 새로 기능 개선
- 기존: 캔버스만 초기화
- 변경: "새 캔버스 N" 항목 서버 저장 + 리스트 즉시 반영

### 신규 JS 함수
- `newNexusCanvas()`: 자동 넘버링 + 서버 저장 + 목록 갱신
- `startCollabSession()`: Mode B 세션 시작 (빈 캔버스 생성)

## 빌드
- #779: Mermaid 렌더링 + SSE 버그 수정
- #780: UX 전면 개편 (모드 탭 + 버튼 위치 + + 새로)
- #781: 노드 위치 + r.ok 버그 수정
