# UX/UI 대규모 개선 — 7가지 기능 추가

## 작업 날짜
2026-02-13

## 작업 브랜치
claude/improve-uxui-design-zHXH6

## 한 줄 요약
CEO 관제실 웹 화면에 다크/라이트 모드, 토스트 알림, 입력 개선, 웰컴 화면 강화, 에이전트 시각화, 결과 복사/접기, 대시보드 등 7가지 기능을 추가했습니다.

---

## 왜 만들었나
CEO가 로컬에서 사용하는 관제실의 사용 편의성을 크게 높이기 위해서입니다. 기존에는 단순 채팅 + 조직도만 있었는데, 이번에 다양한 편의 기능을 추가해서 실제 사용이 훨씬 편해졌습니다.

---

## 변경 사항 (뭘 바꿨는지)

### 수정한 파일
| 파일 | 설명 |
|------|------|
| `web/templates/index.html` (관제실 메인 화면) | CSS + HTML + JavaScript 전체 수정 |
| `docs/updates/2026-02-13_uxui-대규모-개선.md` (이 파일) | 작업 기록 |

### 추가된 7가지 기능

#### 1. 다크/라이트 모드 전환
- 헤더 오른쪽에 해/달 아이콘 버튼 추가
- 클릭하면 다크↔라이트 모드 전환
- 새로고침해도 설정 유지 (localStorage에 저장)
- 라이트 모드일 때 배경, 텍스트, 카드 등 모든 색상이 밝게 변경

#### 2. 토스트 알림 + 연결 끊김 배너 + 데스크톱 알림
- **토스트**: 화면 오른쪽 상단에 작은 알림 박스가 뜸 (4초 후 자동 사라짐)
  - 초록 = 성공, 빨강 = 오류, 노랑 = 경고, 파랑 = 정보
- **연결 끊김 배너**: 서버와 연결이 끊기면 헤더 아래에 빨간 경고 바가 뜸
  - 재연결되면 자동으로 사라짐
- **데스크톱 알림**: 브라우저 탭이 다른 곳에 있을 때 작업 완료되면 시스템 알림

#### 3. 입력 경험 개선
- **여러 줄 입력**: 기존 한 줄짜리 입력창 → 여러 줄 텍스트 입력 가능 (자동 높이 조절)
- **줄바꿈**: Shift+Enter = 줄바꿈, Enter = 보내기
- **명령 히스토리(기록)**: 위/아래 화살표 키로 이전에 입력한 명령을 다시 불러올 수 있음 (최대 50개)
- **취소 버튼**: 에이전트가 작업 중일 때 "보내기" 버튼이 빨간 "취소" 버튼으로 바뀜
- **@멘션(태그)**: `@`을 입력하면 에이전트 목록이 뜨고, 선택하면 자동 입력

#### 4. 웰컴 화면 강화
- **시간대 인사말**: 아침/오후/저녁에 따라 다른 인사말 표시 (KST 기준)
- **프리셋 카테고리 탭**: 전체/전략/분석/법무/마케팅으로 프리셋을 분류해서 볼 수 있음
- **프리셋 추가**: 기존 4개에 2개 더 추가 (사업계획서, 특허 분석)
- 서버에 저장된 프리셋도 자동으로 불러옴

#### 5. 에이전트 작업 상태 시각화 개선
- **작업 설명 표시**: 에이전트가 뭘 하고 있는지 텍스트로 보여줌 (진행률 바 위)
- **빛남(glow) 효과**: 조직도에서 작업 중인 에이전트 옆에 노란 빛남 애니메이션
- **클릭→스크롤**: 처리중 카드에서 에이전트를 클릭하면 조직도에서 해당 에이전트로 자동 이동 + 2초간 노란 하이라이트

#### 6. 결과 메시지 개선
- **복사 버튼**: 결과 우측 상단에 복사 아이콘 → 클릭하면 전체 내용이 클립보드에 복사
- **접기/펼치기**: 긴 결과(1500자 초과)는 접기 버튼이 나타남 → 클릭하면 접었다 펼쳤다 가능
- **품질 등급**: 품질 검수 점수가 있으면 A+/A/B/C/D 배지(뱃지)로 표시
- **이벤트 호환성 수정**: 백엔드가 보내는 `task_accepted`/`task_completed` 이벤트를 올바르게 처리하도록 수정 (기존에는 `processing_start`/`result`만 처리해서 일부 동작 안 됨)

#### 7. 대시보드 뷰
- 헤더에 "채팅/대시보드" 전환 버튼 추가
- 대시보드 탭 클릭 시 서버에서 4가지 데이터를 동시에 불러옴:
  - **총 작업 수, 총 비용, LLM 호출 수, CEO 만족도** — 4개 요약 카드
  - **모델별 비용 차트** — 막대 그래프로 어떤 AI 모델에 얼마 썼는지 표시
  - **에이전트 활동** — 어떤 에이전트가 몇 건 작업했는지, 성공률 표시
  - **최근 작업 10건** — 명령어, 소요시간, 비용, 상태(완료/진행중/실패) 표시

#### 8. 가상 사무실 뷰 (새로 추가)
- 헤더에 "채팅/**사무실**/대시보드" 3단 전환 버튼 추가
- 사무실 탭 클릭 시 **회사 사무실처럼** 부서별 "방"에 에이전트가 배치된 화면 표시
- **CEO 사무실**: CEO 카드 (항상 초록불)
- **비서실**: 4명 에이전트 카드 (가로 4열)
- **LEET Master 본부**: 4개 처(기술/사업/법무/마케팅)가 2x2 그리드로 배치
- **투자분석 본부**: 5명 에이전트 (가로 5열)
- **도구 풀**: 외부 도구 5개 표시
- 각 에이전트에 **상태 불빛**:
  - 🟢 **초록색 (빛남)** = 작업중 (working)
  - 🟠 **주황색** = 대기중 (idle)
  - 🟢 **초록색 (고정)** = 작업 완료 (done)
  - ⚫ **회색** = 오프라인 (도구)

#### 9. 에이전트 개별 설정 모달 (새로 추가)
- 사무실 또는 조직도에서 **에이전트를 클릭하면 설정 팝업(모달)** 열림
- **4개 탭**으로 구성:
  1. **기본 정보**: 이름, 역할, 부서, 현재 모델, 능력치(capabilities) 표시
  2. **모델 설정**: 드롭다운으로 AI 모델 선택 → "모델 변경" 버튼 → 즉시 반영
  3. **추론 정도**: 낮음(⚡)/보통(🧠)/높음(🔬) 3단계 선택 → "추론 정도 변경" 버튼
  4. **소울(성격)**: 큰 텍스트 편집창에서 시스템 프롬프트 수정 → "소울 저장" 버튼 → 즉시 반영
- 저장 시 **서버에 바로 반영**되고, `config/agents.yaml` 파일에도 영구 저장됨
- 변경 성공/실패 시 토스트 알림 표시

---

### 2차 대규모 업데이트: 백엔드 API 31개 전면 연결

기존에 프론트엔드에서 14개 API만 사용하고 있었는데, **나머지 31개 API 전부** 프론트엔드에 연결했습니다.

#### 10. 동적 에이전트/도구 로딩
- 서버에서 에이전트 목록을 자동으로 불러와 조직도에 반영
- API: `GET /api/agents`, `GET /api/tools`

#### 11. 대화 기록 복원
- 페이지 새로고침해도 이전 대화 내용이 자동 복원
- API: `GET /api/conversation`

#### 12. CEO 피드백 👍/👎
- 결과 메시지마다 좋아요/아쉬워요 버튼 추가
- 클릭하면 서버에 피드백 전송 → CEO 만족도에 반영
- API: `POST /api/feedback`

#### 13. 시스템 헬스 팝오버
- 헤더의 "대기/처리중/오류" 뱃지 클릭 → 시스템 구성요소 상태 표시
- 오케스트레이터, 모델 라우터, 에이전트 레지스트리 각각 ✅/❌
- API: `GET /api/health`

#### 14. 대시보드 강화 — 예산/품질/작업상세
- **예산 현황**: 일일/월간 예산 진행 바 + 색상 경고 (빨강=80%초과, 노랑=50%초과)
- **품질 검수 통계**: 합격률, 총 검수/합격/불합격, 에이전트별 불합격 통계
- **작업 상세 모달**: 최근 작업 클릭 → 전체 결과 + 실행 리플레이(실행 과정 트리) 표시
- API: `GET /api/budget`, `GET /api/quality`, `GET /api/tasks/{id}`, `GET /api/replay/{id}`

#### 15. 프리셋 관리
- "+ 새 프리셋" 버튼으로 직접 프리셋 추가 가능
- 서버에서 가져온 프리셋에 X 삭제 버튼
- API: `POST /api/presets`, `DELETE /api/presets/{name}`

#### 16. "더보기" 메뉴 (4개 새 뷰 추가)
- 헤더에 [채팅 | 사무실 | 대시보드 | 더보기 ▼] 네비게이션
- 더보기 클릭 시 4개 메뉴: 활동 로그, 지식 관리, 아카이브, SNS 관리

#### 17. 활동 로그 전용 뷰
- 에이전트 작업 로그를 큰 화면에서 시간순으로 확인
- 에이전트별 필터링 가능
- 실시간 WebSocket 로그 (새로고침 시 초기화)

#### 18. 지식 관리 뷰
- 왼쪽 파일 트리 + 오른쪽 편집기 구조
- 파일 보기/편집/저장/삭제/새 파일 생성
- API: `GET/POST/DELETE /api/knowledge`

#### 19. 아카이브 브라우저 뷰
- 부서별 필터 탭으로 보고서 분류
- 보고서 클릭 → 마크다운 내용 표시
- 작업 ID로 검색 가능
- API: `GET /api/archive`, `GET /api/archive/by-correlation/{id}`

#### 20. SNS 관리 뷰 (4개 탭)
- **연결 상태**: Instagram/YouTube/LinkedIn/Tistory 연결 여부 + 연결 버튼
- **게시하기**: Instagram 사진/릴스, YouTube 업로드 폼
- **승인 대기열**: 게시 요청 승인/거절 관리
- **이벤트**: 최근 SNS 웹훅 이벤트 타임라인
- API: 10개 SNS 관련 API 전부 연결

#### 21. gpt-4o-mini 하드코딩 제거
- 프론트엔드 폴백 모델이 `gpt-4o-mini`로 하드코딩되어 있던 것 → 서버에서 불러온 모델 목록의 첫 번째 값 사용으로 변경

---

## 현재 상태
- 기존 9가지 + 추가 12가지 = **총 21가지 기능** 구현 완료
- 백엔드 48개 API 중 프론트엔드 연결: **45개** (서버전용 3개 제외)
- 프론트엔드 파일 크기: 약 3,200줄 (2,247줄 → 약 3,200줄)
- 커밋 완료, 푸시 완료

## 다음에 할 일
- 실제 브라우저에서 테스트 (python run_web.py → http://localhost:8000)
- 필요시 모바일 반응형 추가 (이번엔 제외)
