# 7가지 이슈 수정 — 작전일지 전면 개편 + 자동화 버그 + 글씨체

## 버전
1.05.003

## 작업 날짜
2026-02-17

## 작업 브랜치
claude/dashboard-redesign-quick-actions

## 변경 사항 요약

CEO가 보고한 7가지 이슈를 모두 수정했습니다.

### 수정된 파일
| 파일 | 역할 | 변경 내용 |
|------|------|----------|
| `web/templates/index.html` (웹 화면) | 프론트엔드 전체 | 작전일지 노션 스타일 전면 개편 + 글씨체 포인트 변경 |
| `web/mini_server.py` (백엔드 서버) | API + 워크플로우 | 무한로딩 버그 수정 + 빨간불 조건 추가 |

### 수정 상세

| # | 문제 | 원인 | 해결 |
|---|------|------|------|
| 1 | **빨간불 "이상"이 절대 안 켜짐** | 서버가 `"ok"` / `"busy"` 2가지만 반환. "이상"을 보내는 조건이 없음 | 최근 1시간 내 실패 3건 이상이면 `"error"` 반환 → 빨간불 "이상" 표시 |
| 2+3+4 | **작전일지 디자인 조잡** | 정보가 한 줄에 빽빽, 버튼 hover로만 보임, 전체적으로 산만 | **노션 스타일로 전면 개편**: 카드를 넓게 쓰고 정보를 위아래로 분리, 버튼 항상 보임, "결과 보기" 버튼 추가 |
| 5 | **자동화 탭 글씨체 안 예쁨** | 영문 기반 기본 폰트가 한글에서 어색 | 제목/워크플로우 이름에 **Noto Serif KR** (명조체) 적용. 본문은 Pretendard 유지 |
| 6 | **자동화 실행 시 에이전트 모델 설정 안 따름** | 워크플로우가 `_process_ai_command()` 호출 자체가 잘못되어 에이전트 라우팅이 안 됨 | 버그 7번 수정으로 자동 해결 — 이제 정상 라우팅되면서 에이전트별 모델 설정도 따름 |
| 7 | **자동화 실시간+배치 둘 다 무한 로딩** | `_process_ai_command(명령, source="workflow")` ← 함수가 `task_id`를 기대하는데 `source`를 넘김. TypeError 발생 → 결과 안 옴 → 무한 대기 | 워크플로우/배치/예약 실행 3곳 모두 `create_task()` 후 올바른 `task_id` 전달로 수정 |

### 작전일지 노션 스타일 개편 상세

**변경 전:**
- 카드가 좁고 정보가 한 줄에 빽빽하게 들어감
- 별/엑스/선택 버튼이 마우스 올려야만 보임 (hover)
- 배치 결과 텍스트가 그대로 노출되어 지저분
- 컬러바가 왼쪽 3px → 작아서 잘 안 보임

**변경 후:**
- 카드가 넓고 정보가 위아래로 분리됨 (4행 구조)
  - 1행: 상태 도트 + 명령어 (15px 큰 글씨) + 시간
  - 2행: 요약 (마크다운 제거된 깔끔한 텍스트)
  - 3행: 상태 뱃지 + 태그 + 비용 + 소요시간
  - 4행: [결과 보기 ▸] [내부 대화] ★ × ○ (항상 보임)
- 컬러바가 카드 상단 3px → 가로 전체로 표시되어 눈에 잘 띔
- "결과 보기" 버튼 클릭해야 상세 결과 펼침 (깔끔)
- 펼침 영역에 배경 + 테두리 추가 (결과가 카드와 구분됨)

### 글씨체 변경 상세

- **본문**: Pretendard Variable (기존 유지 — 한국어 가독성 최고)
- **제목/포인트**: Noto Serif KR 명조체 (`.font-title` 클래스)
- 적용 위치: 워크플로우 이름, 날짜 구분선, 워크플로우 실행 모달 제목

## 현재 상태
7가지 수정 완료. 커밋 + 푸시 대기 중.

## 다음에 할 일
- 작전일지 노션 스타일 카드 디자인 확인
- 자동화 탭 워크플로우 실행 (무한 로딩 해결 확인)
- 글씨체 명조 포인트 확인
- 시스템 상태 "이상" 조건 확인 (실패 3건 이상 시)
