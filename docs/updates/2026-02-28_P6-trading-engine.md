# arm_server.py P6 리팩토링 — 트레이딩 엔진 분리

**빌드**: #662 | **날짜**: 2026-02-28

## 요약

arm_server.py에서 CIO 신뢰도 학습 + 자동매매 시스템 전체를 `web/trading_engine.py`로 분리.

## 변경

| 파일 | 변경 |
|------|------|
| `web/trading_engine.py` | **신규** 2,830줄 — CIO 학습 + 정량분석 + 자동매매 + 가격 트리거 |
| `web/arm_server.py` | 7,676→4,948줄 (-2,728줄) |

## 이관된 기능

- **CIO 학습 파이프라인**: ELO 랭킹, Bayesian 보정 버킷, 도구 효과 추적, 오답 패턴 탐지
- **정량분석**: RSI/MACD/볼린저밴드/거래량/이평선 합의투표 시스템 (Quant Score)
- **자동매매**: 가격 트리거(손절/익절/매수지정가), 트레이딩 봇 루프, DST 감지
- **CIO 데몬**: 예측 사후검증(3일/7일), 주간 소울 자동 업데이트, Shadow Trading 알림
- **기타**: FX 환율 갱신, 시세 캐시, 포트폴리오 기본값, 리스크 프로필

## 리팩토링 누적

| Phase | 모듈 | 줄수 | 감소 |
|-------|------|------|------|
| P1 | config_loader.py | 343 | -294 |
| P2 | debug_handler.py | 591 | -515 |
| P3 | argos_handler.py | 505 | -429 |
| P4 | argos_collector.py | 1,026 | -963 |
| P5 | batch_system.py | 1,808 | -1,760 |
| P6 | trading_engine.py | 2,830 | -2,728 |
| **합계** | **6개 모듈** | **7,103줄** | **-6,689줄** |

arm_server.py: 11,637 → 4,948줄 (57% 감소)
