# 웹 메시지 전송 시 비서실장 무응답 버그 수정

## 버전
0.09.005

## 작업 날짜
2026-02-15

## 작업 브랜치
claude/investigate-test-messages-Jlm13

## 변경 사항 요약

### 문제
CEO가 웹 화면에서 메시지를 입력하고 보냈는데, 비서실장(AI)이 아무 응답을 하지 않는 버그가 있었습니다.

### 원인
**프론트엔드(화면)와 백엔드(서버)가 서로 다른 이름으로 데이터를 주고받고 있었습니다:**

- **프론트엔드** (index.html 4379번째 줄): `{ type: 'command', text: '테스트' }` → 키 이름이 **`text`**
- **백엔드** (mini_server.py 301번째 줄): `msg.get("content", "")` → 키 이름을 **`content`**로 찾음

"text"라는 이름으로 보냈는데 "content"라는 이름으로 찾으니, 매번 빈 문자열("")이 되고, `if cmd_text:` 검사에서 탈락해서 AI한테 전달조차 안 됨.

### 해결
- `web/mini_server.py` (백엔드 서버) — 1줄 수정
  - 기존: `msg.get("content", "").strip()`
  - 수정: `(msg.get("content") or msg.get("text") or "").strip()`
  - "content" 또는 "text" 어느 이름으로 보내든 다 받도록 수정

### 수정한 파일
| 파일 | 설명 | 변경 내용 |
|------|------|----------|
| `web/mini_server.py` | 백엔드 서버 (API + WebSocket 처리) | WebSocket 메시지 키 이름을 "content" 또는 "text" 둘 다 수용하도록 수정 |

## 현재 상태
- 수정 완료, 커밋 + 푸시 완료
- 배포 후 웹에서 메시지를 보내면 비서실장이 정상 응답할 것

## 다음에 할 일
- 배포 후 웹에서 "테스트" 메시지를 다시 보내서 비서실장 응답 확인
- ANTHROPIC_API_KEY가 서버에 설정되어 있어야 AI가 실제로 답변함
