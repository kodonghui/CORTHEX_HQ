# corthex-hq.com 도메인 구매 + HTTPS 설정 + v3 구현 프롬프트 준비

## 버전
`2.00.001`

## 작업 날짜
2026-02-18

## 작업 브랜치
`claude/domain-https-v3prep`

---

## 변경 사항 요약

### 이번 세션에서 한 일 3가지

---

### 1. corthex-hq.com 도메인 연결 (다른 Claude 세션이 처리)

**무엇을 했는가?**
CEO가 `corthex-hq.com` 도메인을 Cloudflare에서 구매($10.46/년)하고, DNS(도메인 주소 → 서버 IP를 연결해주는 설정)를 `158.179.165.97` (ARM 서버)로 연결 완료.

**기존 오류 수정:**
CLAUDE.md에 이전(폐기된) 서버 IP가 `158.179.165.97`로 잘못 기록되어 있었음. 실제 폐기 서버는 `168.107.28.100`이고, `158.179.165.97`이 현재 사용 중인 ARM 서버가 맞음. 수정 완료.

**수정된 파일:**
- `CLAUDE.md` — 도메인 정보 추가, 구서버 IP 수정
- `.env.example` — Redirect URI 도메인으로 업데이트
- `docs/project-status.md` — 도메인 정보 추가
- `docs/updates/2026-02-18_도메인-DNS-연결.md` — 작업 기록 생성

---

### 2. HTTPS(자물쇠 보안 연결) 자동 설정 (다른 Claude 세션이 처리)

**무엇을 했는가?**
`http://` 대신 `https://`(암호화된 보안 연결)가 되도록 Let's Encrypt(무료 인증서 발급 기관)를 이용한 certbot(자동 인증서 설치 도구) 설정을 `deploy.yml`(배포 자동화 파일)에 추가.

**왜 HTTPS가 필요한가?**
- Google OAuth(유튜브, 캘린더 연동) → HTTPS 없으면 연결 거부
- Instagram, LinkedIn OAuth → HTTPS 필수
- 보안 (데이터 암호화)

**동작 방식:**
- 최초 배포 1회에만 인증서 발급 (약 30초 소요)
- 이후 배포마다 인증서 만료 전 자동 갱신 (90일 마다)
- `CERTBOT_EMAIL` Secret 없어도 폴백으로 동작

**수정된 파일:**
- `.github/workflows/deploy.yml` — certbot 자동 설치 + 인증서 발급 코드 27줄 추가

**현재 상태:**
- `http://corthex-hq.com` → 정상 접속
- `https://corthex-hq.com` → 다음 배포 실행 후 작동

---

### 3. CLAUDE.md 전체 URL 도메인으로 업데이트 (이번 세션)

**무엇을 했는가?**
CLAUDE.md 전체에서 `http://{SERVER_IP}` 형식의 URL을 `http://corthex-hq.com`으로 업데이트. 총 7곳 수정.

또한 HTTPS 설정 정보와 관련 트러블슈팅 내용도 추가.

**수정된 위치:**
- "로컬에서 확인 금지" 규칙 → 도메인 주소 명시
- 빌드번호 확인 URL → 도메인으로 교체
- 배포 상태 JSON URL → 도메인으로 교체
- 빌드번호 체크리스트 예시 → 도메인으로 교체
- 빌드 번호가 PLACEHOLDER로 표시될 때 해결법 → 도메인으로 교체
- 배포 확인 3가지 방법 → 도메인으로 교체
- nginx 캐시 확인 curl 명령어 → 도메인으로 교체
- 서버 배포 규칙 섹션 → HTTPS 설명 추가
- 배포 트러블슈팅 표 → HTTPS 관련 행 추가

---

### 4. v3 구현 프롬프트 파일 저장 (이번 세션)

**무엇을 했는가?**
compact(대화 압축) 후 새 세션에서 바로 사용할 수 있는 완전한 맥락 프롬프트를 파일로 저장.

**저장 위치:** `docs/prompts/autonomous-system-v3-prompt.md`

**파일 내용:**
- 이번에 구현할 5가지 자율 운영 시스템 전체 설계
- 기능별 상세 코드 스니펫(코드 예시)
- 팀 구성(FE+BE+QA) 및 작업 순서
- 절대 금지 사항
- 완료 기준 체크리스트
- startup_investment.py 토론 패턴 참고 내용

---

## 현재 상태

| 항목 | 상태 |
|------|------|
| 도메인 접속 | ✅ `http://corthex-hq.com` 정상 |
| HTTPS | ⏳ 다음 배포 후 `https://corthex-hq.com` 작동 예정 |
| CLAUDE.md | ✅ 도메인 URL 전체 업데이트 완료 |
| v3 프롬프트 | ✅ `docs/prompts/autonomous-system-v3-prompt.md` 저장 완료 |

---

## 다음에 할 일

1. **v3 자율 운영 시스템 구현** — 새 세션에서 `docs/prompts/autonomous-system-v3-prompt.md` 읽고 시작
   - 기능1: 에이전트 장기 기억
   - 기능2: 능동적 에이전트 (스케줄러)
   - 기능3: 비동기 작업 큐
   - 기능4: 에이전트 토론 시스템
   - 기능5: 워크플로우 빌더

2. **HTTPS 확인** — `https://corthex-hq.com` 접속해서 자물쇠 표시 확인

3. **GitHub Secrets에 CERTBOT_EMAIL 추가** (선택사항) — https://github.com/kodonghui/CORTHEX_HQ/settings/secrets/actions 에서 `CERTBOT_EMAIL` = CEO 이메일 입력 → 인증서 갱신 알림 받을 수 있음

---

## 전문 용어 해설

| 용어 | 쉬운 설명 |
|------|---------|
| DNS | 도메인 주소를 서버 IP로 연결해주는 설정. 전화번호부 같은 것 |
| HTTPS | 데이터가 암호화된 보안 접속. 주소 앞에 자물쇠(🔒) 표시 |
| Let's Encrypt | 완전 무료로 HTTPS 인증서를 발급해주는 비영리 기관 |
| certbot | Let's Encrypt 인증서를 자동으로 설치/갱신해주는 프로그램 |
| 인증서 | HTTPS를 쓰려면 필요한 "이 사이트는 진짜다"라는 보증서 |
| compact | 대화 내용이 길어질 때 AI가 요약해서 메모리를 절약하는 것 |
