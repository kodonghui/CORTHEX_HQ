# CORTHEX HQ - 프로젝트 현재 상태

> **목적**: 새 세션 시작 시 현재 상태 즉시 파악용. 매 작업 완료 시 업데이트.
> **아카이브**: `docs/archive/project-status-archive.md` (2/20~2/23 기록)

---

## 마지막 업데이트

- **날짜**: 2026-02-25
- **버전**: `4.00.000`
- **빌드**: #594
- **서버**: https://corthex-hq.com

---

## 🔴 전수검사 + 정비 마스터 플랜 (대표님 승인 2026-02-25)

> **원칙**: 새 기능 추가 전에 지금 있는 것부터 제대로 고친다.

### Phase 0 — 즉시 수정

| # | 내용 | 파일 | 상태 |
|---|------|------|------|
| 0-1 | **CIO 보고서 잘림** — 서버 로그에서 원인 확정 (토큰 한도 vs AI 장문). 대표님: "max token 늘리면 되는 일 아냐?" → 로그 먼저 확인 후 판단 | `web/mini_server.py`, `web/ai_handler.py` | ⬜ |
| 0-2 | **Soul Evolution 자동 승인** — 대표님: "귀찮아 버려 알아서하라해" → CEO 승인 단계 제거, 개선안 자동 적용 | `web/handlers/soul_evolution_handler.py` | ⬜ |
| 0-3 | **Soul Gym 24/7 상시 운영** — 대표님: "24시간 7일 내내 하라니까" → 매주 월요일 크론 → 상시 루프로 변경. 비용: 라운드당 ~$0.012 | `web/mini_server.py`, `web/soul_gym_engine.py` | ⬜ |
| 0-4 | **conversation_id 전달 버그** — 에이전트 호출 체인에서 conversation_id 누락 → `NameError` | `web/mini_server.py` | ✅ 빌드#594 |

### Phase 1 — CIO 반려 원인 분석 + 검수 시스템 점검

**목표**: 투자팀장이 왜 반려당했는지 정확히 진단. 부당한 반려인지, 루브릭이 문제인지.

| # | 내용 | 확인 위치 |
|---|------|----------|
| 1-1 | 서버 로그에서 CIO 마지막 분석 → **보고서 원문** 확인 | `/api/debug/server-logs` 또는 기밀문서 |
| 1-2 | **QA 반려 사유 원문** 확인 → 5항목(결론/근거/리스크/형식/논리) 중 뭐가 걸렸는지 | `_chief_qa_review()` 로그 |
| 1-3 | **루브릭 검토** — D1/Q2~Q5 기준이 합리적인지 | `config/quality_rules.yaml`, `knowhow/05-quality-rubric.md` |
| 1-4 | 팀장 출력 형식 ↔ 비서실장 검수 입력 형식 **일치 여부** | CIO soul prompt vs QA prompt |
| 1-5 | **반려 사유 원문 검토** — 부당 반려인지 판정 (대표님: "통과율 의미없어, 반려사유를 봐라") | 반려 로그 직접 분석 |

### Phase 2 — 기능 다이어트 + 코드 전수검사

**목표**: 불필요 코드 삭제, 레거시 정리, 실제 동작하는 것만 남기기.

| # | 내용 | 확인 위치 |
|---|------|----------|
| 2-1 | **agents.yaml specialist 잔재 제거** — `spawn_agent(frontend_specialist...)` 예시가 남아있어 AI가 호출 시도할 수 있음 | `config/agents.yaml` system_prompt |
| 2-2 | **도구 매핑 전수 확인** — 89개 도구가 실제 함수와 매핑되는지 전수 검사 | `config/tools.yaml` ↔ 실제 함수 |
| 2-3 | **동영상 제작 / SNS 업로드** 코드 동작 여부 — 16개 엔드포인트 중 실제 작동하는 것 확인 | `web/handlers/sns_handler.py` |
| 2-4 | **고아 핸들러 제거** — `consult_handler.py` 등 미사용 파일 | `web/handlers/` 전체 (27개 파일) |
| 2-5 | **JS 레거시 정리** — `staffList = ['report_specialist'...]`, `"CIO + 전문가 4명 즉시 분석 중..."` 토스트, `tierOrder` 등 전문가 참조 전부 제거 | `web/static/js/corthex-app.js` (5,047줄) |
| 2-6 | **로그 형식 정리** — 현재 comms_log에 뭐가 들어가고 뭐가 빠지는지. 필요 정보 vs 실제 저장 차이 | `db.py`, comms_log 테이블 |

### Phase 3 — UX/UI 버그 + 디자인 정비

**목표**: 눈에 보이는 문제들 전부 해결.

| # | 내용 |
|---|------|
| 3-1 | **사무실 너무 빽빽** — 레이아웃 여백/배치 정리 |
| 3-2 | **왼쪽 직원 목록** — 이슈 확인 + 수정 |
| 3-3 | **전략실 교신로그 대시보드** — 표시 이슈 |
| 3-4 | **기타 UI 불편** — 대표님이 corthex-hq.com 열고 하나씩 지적하면 실시간 수정 |

### Phase 4 — 아키텍처 품질 검토

**목표**: 코드가 01번 노하우(대규모 리빌딩 패턴)처럼 제대로 짜여있는지 확인.

| # | 내용 |
|---|------|
| 4-1 | **mini_server.py 9,866줄** — 모듈 분리 상태 점검 (리팩토링 14단계 중 Step 1만 완료) |
| 4-2 | **handler 27개** 파일 역할 중복/누락 검토 |
| 4-3 | **17-cutting-edge 전부 검토** — S1(WebGPU), S2(장기기억), A2(MCP), B3(Agent SDK) 각 기술 적용 가능성 재평가 |
| 4-4 | **AI 프로바이더 폴백** 실제 동작 테스트 — Anthropic 소진 시 Google/OpenAI 전환 검증 |
| 4-5 | **노션 연동** 실제 저장 검증 — QA 통과한 분석이 노션 DB에 저장되는지 확인 |

### Phase 5 — 새 기능 추가 (Phase 0~4 완료 후)

| # | 내용 | 상세 |
|---|------|------|
| 5-1 | **NEXUS 재설계** — 왼쪽: Mermaid 시스템 플로우차트 (기능이 어떻게 돌아가는지), 오른쪽: Excalidraw SketchVibe 캔버스 (대표님 손그림 → Claude 정식 다이어그램) | 3D→2D 전환 확정 (`knowhow/14`) |
| 5-2 | **Soul Gym 전 팀장 확장** — 6팀장 맞춤 벤치마크 (`docs/architecture/soul-gym-benchmarks.md`) |
| 5-3 | **신기술 도입** — 17번에서 확정된 것들 |
| 5-4 | **mini_server.py 이름 변경** + 추가 리팩토링 |

---

## 🔍 별도 진행 — SketchVibe 특허 조사

- **법무팀장 + 전략팀장 합동 조사** 지시 대기 중
- 법무팀장: 선행기술 재조사 + 청구항 설계 + 출원 절차 상세 + 비용
- 전략팀장: 시장 분석(TAM/SAM/SOM) + 사업 모델 + ROI + 타이밍
- **핵심 결론**: 통합 파이프라인(스케치+말→다이어그램→config→배포)은 전 세계에 없음 (2026-02-25 확인)
- **위험**: tldraw Computer/Agent Starter Kit이 확장되면 위협 가능 → 선점 필요
- **미결**: 변리사 선임 150~300만원, 상표 출원 ~50만원

---

## ✅ 최근 완료

| 날짜 | 내용 | 빌드 |
|------|------|------|
| 02-25 | conversation_id 전달 버그 수정 | #594 |
| 02-25 | Soul Gym 경쟁 진화 시스템 | #591 |
| 02-25 | 팀장 단독 분석 + QA 게이트 | #591 |
| 02-25 | v4 대개편 (6팀장 체제) | #575 |
| 02-25 | AI 크레딧 소진 자동 폴백 | #575 |
| 02-25 | NEXUS 3D 대개편 | — |
| 02-25 | 블라인드 채점 품질 개선 13 Phase | — |
| 02-24 | P0 버그 3건 + 로그 버그 6건 | — |

---

## ⬜ 미완료 이관

- **노션 DB 실제 저장 검증** — Phase 4-5에서 처리
- **NEXUS 재설계** — Phase 5-1에서 처리 (3D→2D + Excalidraw)

---

## 🔴 CTO — 동면 상태

> 2026-02-22 대표님 지시. 용도 확정까지 CTO 관련 작업 보류.

---

## 🎉 첫 실매매 (2026-02-21)

NVDA 1주 @ $189.115 — KIS 실계좌 체결 완료

---

## CEO 확정 설계 결정

| 항목 | 결정 |
|------|------|
| 실거래 UI | 2행 2열: 실거래(한국\|미국) / 모의투자(한국\|미국) |
| 사령관실 | SSE 상시 + P2P 실시간 + 뱃지 + 네트워크 다이어그램 |
| 디버그 URL | 버그 시 즉석 생성 → 대표님에게 적극 제공 |
| CIO 목표가 | CIO가 분석 후 직접 산출 |
| order_size: 0 | CIO 비중 자율 (정상! 변경 금지) |
| NEXUS | 2D 전환: 왼쪽 시스템 플로우차트 + 오른쪽 Excalidraw |
| Soul Evolution | 자동 승인 (CEO 승인 불필요) |
| Soul Gym | 24/7 상시 운영 |

---

## 프로젝트 기본 정보

| 항목 | 값 |
|------|-----|
| 저장소 | https://github.com/kodonghui/CORTHEX_HQ |
| 서버 | Oracle Cloud ARM 24GB (corthex-hq.com) |
| 버전 | 4.00.000 |
| 에이전트 | 7명 (6팀장 체제) |
| 도구 | 89개 (tools.yaml 기준) |
| DB | SQLite (/home/ubuntu/corthex.db) |
| GitHub Secrets | 50+ 전부 등록 완료 |
