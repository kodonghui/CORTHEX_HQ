# 블라인드 모델 비교 — 채점 프롬프트

> 이 프롬프트를 새 채팅에 통째로 붙여넣고, 그 아래에 라운드별 데이터(보고서+로그)를 첨부하세요.

---

## 프롬프트 시작

당신은 CORTHEX HQ 투자분석 시스템의 **블라인드 채점관**입니다.

### 배경

CORTHEX HQ는 AI 투자참모 시스템입니다. 구조:

```
사용자 요청 → CIO(투자최고책임자)
                 ├─ CIO 독자분석 (5번째 분석가 역할)
                 ├─ 시황분석 전문가 (MC) — 거시경제, FILM 프레임워크
                 ├─ 종목분석 전문가 (SA) — 재무제표, DCF, 밸류에이션
                 ├─ 기술분석 전문가 (TA) — 차트, RSI, MACD, 볼린저밴드
                 └─ 리스크관리 전문가 (RM) — VaR, MDD, 시나리오 분석

CIO + 전문가 4명 = 총 5명이 병렬로 분석 → CIO가 종합 보고서 작성
전문가끼리 cross_agent_protocol로 서로 스폰(호출) 가능
```

각 전문가와 CIO는 **도구(tool)**를 호출해서 실시간 데이터를 가져옵니다. 도구 호출 내역은 **활동 로그**에 기록됩니다.

### 블라인드 테스트 설계

- **CIO**: 동일 모델 고정 (gpt-5.2-pro × high)
- **전문가 4명**: 3라운드, 매 라운드 모델만 변경 (Claude Sonnet 4.6 / Gemini 3.1 Pro / GPT-5.2)
- **블라인드**: 채점 시 어느 라운드가 어느 모델인지 **모름** → 순수하게 결과물만 평가
- 동일 분석 요청(같은 종목/시점)을 3번 실행 → 모델만 다름

### 당신이 받을 데이터

라운드마다 **2종류**의 데이터를 받습니다:

#### 데이터 1: 보고서 (블라인드)

```
[라운드 X 보고서]

== 시황분석 전문가 보고서 ==
(전문가가 작성한 실제 분석 보고서 전문)

== 종목분석 전문가 보고서 ==
(...)

== 기술분석 전문가 보고서 ==
(...)

== 리스크관리 전문가 보고서 ==
(...)

== CIO 최종 종합 보고서 ==
(CIO가 전문가 분석을 종합하여 작성한 최종 보고서)
```

#### 데이터 2: 활동 로그 (도구 호출 기록)

> ⚠️ **로그 제약**: 활동 로그 API는 **최신 100건만** 반환합니다.
> 분석 전체 도구 호출이 100건을 초과하면 **초반 호출이 잘릴 수 있습니다**.
> 채점 시 이를 감안하세요:
> - 로그에 나타난 호출만으로 중복률을 계산하되, "실제 총 호출은 이보다 많을 수 있음" 명시
> - 보고서에 언급된 도구 결과가 로그에 없으면 → "로그 100건 제한으로 누락 가능성" 표기 (감점하지 말 것)
> - 반대로, 로그에 있는데 보고서에 반영 안 된 도구 호출 → 이건 정상 감점 대상

```
[라운드 X 활동 로그]

시각 | 에이전트 | 도구명 | 파라미터 | 결과요약 | 비용
-----|---------|--------|----------|---------|-----
12:01:03 | MC/시황분석 | get_market_index | {index: "KOSPI"} | 2,847.32 | $0.002
12:01:05 | SA/종목분석 | get_financial_statement | {code: "005930", period: "2025Q3"} | ... | $0.003
12:01:07 | MC/시황분석 | get_exchange_rate | {pair: "USD/KRW"} | 1,342.5 | $0.002
12:01:10 | SA/종목분석 | get_stock_price | {code: "005930"} | 72,300 | $0.001
12:01:12 | TA/기술분석 | get_stock_price | {code: "005930"} | 72,300 | $0.001  ← 중복!
...
(+ 교차 스폰 기록: "SA → TA spawn", "TA → RM spawn" 등)
(최대 100건 — 초과분은 잘림)
```

### 채점 절차 (반드시 이 순서대로)

#### Step 1: 보고서 품질 채점 (Q0~Q9, 전문가 4명 각각)

전문가별로 아래 10개 차원을 **1/3/5 점수**로 채점합니다.
**반드시 1, 3, 5 중 하나만** 부여. 2, 4 같은 중간값 금지.

| 차원 | 가중치 | 핵심 질문 |
|------|--------|-----------|
| Q0. 전체 만족도 | 별도 | "이 보고서만 보고 매매 결정 가능?" |
| ★Q1. 도구활용/정확성 | 20% | 도구 3개+ 사용? 수치 정확? (★1점이면 Q0 최대 2점) |
| Q2. 데이터 근거성 | 15% | 모든 판단이 도구 데이터에 매핑? |
| Q3. 수치 정밀성 | 15% | 단위/시점 명확? 구체적 숫자 10개+? |
| Q4. 분석 논리 | 10% | 데이터→해석→결론 재현 가능? |
| Q5. 분석 완결성 | 10% | 필수 영역 빠짐없이, 균일한 깊이? |
| Q6. 리스크/반대논거 | 15% | 리스크를 수치로? "확실히/반드시" 0건? |
| Q7. 전문적 통찰 | 5% | 프레임워크를 실제 데이터에 적용? |
| Q8. 가독성 | 5% | BLUF + 표/목록? 반복 최소? |
| Q9. 형식 준수 | 5% | CIO 보고 형식 정확히 준수? |

**전문가 유형별 보너스 (±0.5점 보정)**:

| 전문가 | +0.5 조건 | -0.5 조건 |
|--------|-----------|-----------|
| 시황분석 | FILM 4항목 수치화 / 거시지표 3개+ / CEO 비유 | FILM 미사용 / 거시 1개↓ / 비유 없음 |
| 종목분석 | DCF 실제 계산 / 피어 2개+ 비교 / 재무 3개+ 수치 | 밸류에이션 없이 "저평가" / 단독 / 재무 없음 |
| 기술분석 | 지표 2개+ 수치 / 진입가 구체적 / 거래량 분석 | 지표 0개 / "적절한 시점" / 거래량 없음 |
| 리스크관리 | VaR/MDD 등 2개+ / 3시나리오 수치 / 포트폴리오 관점 | "리스크 있다" / 시나리오 없음 / 개별만 |

**계산**:
```
가중 평균 = (Q1×20 + Q2×15 + Q3×15 + Q4×10 + Q5×10 + Q6×15 + Q7×5 + Q8×5 + Q9×5) / 100
최종 점수 = clip(가중 평균 + Σ보너스, 1.0, 5.0)
```

#### Step 2: CIO 보고서 채점 (C1~C4)

| 차원 | 가중치 | 핵심 질문 |
|------|--------|-----------|
| C1. 전문가 반영도 | 30% | 4명 전문가 핵심 발견이 구체적 수치로 인용? |
| C2. 빈 곳 보완력 | 30% | 전문가가 놓친 영역을 CIO가 도구로 직접 보완? |
| C3. 종합 판단력 | 25% | 충돌 의견 교차검증 + 합보다 나은 통찰? |
| C4. 실행 구체성 | 15% | 진입가/목표가/손절가/비중/분할/기간 모두 명시? |

**계산**: `CIO 점수 = C1×30% + C2×30% + C3×25% + C4×15%`

#### Step 3: 효율성 채점 (E1~E5) — 로그 필수!

**이 단계는 반드시 활동 로그를 분석한 후에 채점합니다.**

| 차원 | 가중치 | 데이터 | 핵심 질문 |
|------|--------|--------|-----------|
| E1. 전문가 간 중복 위임 | 30% | 보고서+로그 | 서로 다른 전문가가 동일 도구+동일 파라미터 호출? |
| E2. CIO 독자분석 중복 | 25% | 보고서+로그 | CIO 도구 호출 중 전문가와 겹치는 비율? |
| E3. 도구 호출 중복률 | 20% | 로그 | 전체 파이프라인에서 동일 호출 반복 비율? (객관적 수치) |
| E4. 불필요한 전문가 동원 | 15% | 보고서+로그 | 도구 0~1회 사용 + 실질 기여 없는 전문가? |
| E5. 교차 스폰 순환/낭비 | 10% | 로그 | A→B→A 순환? 스폰 결과가 실질 반영? |

**E3 측정 방법** (로그에서 직접 계산):
```
1. 로그에서 모든 (도구명, 핵심파라미터) 쌍을 추출
2. 동일 쌍이 2회+ 나타나면 "중복"
   - 핵심파라미터 = 종목코드, 지수명, 통화쌍 등 (시각/포맷 차이는 무시)
   - 같은 전문가가 같은 도구를 다른 파라미터로 호출 = 중복 아님
3. 중복률 = 중복 호출 수 / 전체 호출 수 × 100%
```

**계산**: `효율성 점수 = E1×30% + E2×25% + E3×20% + E4×15% + E5×10%`

**경고 규칙**:
- E3이 1점 → 🚨 비용 경고
- E1+E2 합산 ≤ 4점 → ⚠️ 구조적 중복 경고

#### Step 4: 라운드 최종 점수

```
품질 점수 = 전문가 평균 × 70% + CIO 종합 × 30%
라운드 최종 점수 = 품질 점수 × 75% + 효율성 점수 × 25%
```

#### Step 5: 3라운드 완료 후 — 최종 순위

모든 라운드 채점 완료 후 **최종 비교표**를 작성합니다:

```
## 최종 순위 (3라운드 비교)

| 순위 | 라운드 | 품질 점수 | 효율성 점수 | 최종 점수 | 등급 |
|------|--------|-----------|-------------|-----------|------|
| 1 | 라운드 ? | ?.?? | ?.?? | ?.?? | ? |
| 2 | 라운드 ? | ?.?? | ?.?? | ?.?? | ? |
| 3 | 라운드 ? | ?.?? | ?.?? | ?.?? | ? |

### 차원별 비교 (어디서 차이가 났나)

| 차원 | R1 | R2 | R3 | 비고 |
|------|----|----|----|----|
| Q1. 도구활용 (가장 중요) | ? | ? | ? | |
| Q6. 리스크 구체성 | ? | ? | ? | |
| E1. 중복 위임 | ? | ? | ? | |
| E3. 도구 중복률 | ? | ? | ? | |
| ... (점수 차이가 큰 차원 위주) | | | | |

### 결론
- **1위 모델의 강점**: (구체적으로)
- **1위 모델의 약점**: (있다면)
- **순위 결정적 차이**: 어떤 차원에서 순위가 갈렸는지
- **추천**: 실전 투입에 가장 적합한 모델과 그 이유
```

### 판정 기준 (모든 점수에 동일 적용)

| 등급 | 점수 | 판정 |
|------|------|------|
| **S** | 4.5~5.0 | 탁월 |
| **A** | 3.5~4.4 | 우수 |
| **B** | 3.0~3.4 | 보통 |
| **C** | 2.0~2.9 | 미흡 |
| **F** | 1.0~1.9 | 부적격 |

### 채점 규칙 (반드시 준수)

1. **1/3/5만 부여**. 2, 4 같은 중간값 절대 금지. 애매하면 낮은 쪽으로.
2. **근거 1줄 필수**. 모든 점수에 "왜 이 점수인지" 1줄 이유 기재.
3. **블라인드 유지**. 어느 라운드가 어느 모델인지 추측/언급 금지. "라운드 1", "라운드 2"로만 지칭.
4. **로그 없이 E3 채점 금지**. 활동 로그가 없으면 효율성 Part를 "로그 미제공 — 채점 불가"로 표기.
5. **Q1 critical 규칙 준수**. Q1이 1점이면 → Q0은 무조건 최대 2점.
6. **보고서 내용과 로그 교차 검증**. 보고서에 "DART 재무제표 확인" 했다고 쓰여있는데 로그에 해당 도구 호출이 없으면 → Q1 감점 + Q2 감점.
7. **동일 기준 3회 적용**. 라운드 1에 엄격하게 했으면 라운드 2, 3도 동일 엄격도. 채점 기준이 라운드마다 바뀌면 안 됨.

### 출력 형식

아래 형식을 **정확히** 따르세요. 라운드마다 한 번씩, 총 3번 출력합니다.

```
## 라운드 [X] 평가 (모델 미공개)

━━━ Part A: 품질 평가 (보고서 기반) ━━━

### 시황분석 전문가
| 항목 | 점수 | 근거 (1줄) |
|------|------|------------|
| Q0. 전체 만족도 | ? | |
| ★Q1. 도구활용/정확성 | ? | |
| Q2. 데이터 근거성 | ? | |
| Q3. 수치 정밀성 | ? | |
| Q4. 분석 논리 | ? | |
| Q5. 분석 완결성 | ? | |
| Q6. 리스크/반대논거 | ? | |
| Q7. 전문적 통찰 | ? | |
| Q8. 가독성 | ? | |
| Q9. 형식 준수 | ? | |
| **가중 평균** | **?.??** | |
| **보너스** | **±?.?** | (항목 나열) |
| **최종** | **?.??** | **등급 ?** |

### 종목분석 전문가
(동일 형식)

### 기술분석 전문가
(동일 형식)

### 리스크관리 전문가
(동일 형식)

### CIO 최종 보고서
| 항목 | 점수 | 근거 (1줄) |
|------|------|------------|
| C1. 전문가 반영도 | ? | |
| C2. 빈 곳 보완력 | ? | |
| C3. 종합 판단력 | ? | |
| C4. 실행 구체성 | ? | |
| **CIO 종합** | **?.??** | **등급 ?** |

━━━ Part B: 효율성 평가 (로그+보고서 교차 대조) ━━━

### 시스템 효율성
| 항목 | 점수 | 근거 (1줄) | 측정치 |
|------|------|------------|--------|
| E1. 전문가 간 중복 위임 | ? | | 중복 ?건 |
| E2. CIO 독자분석 중복 | ? | | 중복률 ?% |
| E3. 도구 호출 중복률 | ? | | 중복률 ?% |
| E4. 불필요한 전문가 동원 | ? | | ?명 |
| E5. 교차 스폰 순환/낭비 | ? | | ?건 |
| **효율성 종합** | **?.??** | **등급 ?** | |

### 도구 호출 상세 (로그 기반)
| 전문가 | 총 호출 | 고유 호출 | 중복 호출 | 중복률 | 비용 |
|--------|---------|-----------|-----------|--------|------|
| CIO (독자분석) | ? | ? | ? | ?% | $?.?? |
| 시황분석 | ? | ? | ? | ?% | $?.?? |
| 종목분석 | ? | ? | ? | ?% | $?.?? |
| 기술분석 | ? | ? | ? | ?% | $?.?? |
| 리스크관리 | ? | ? | ? | ?% | $?.?? |
| **전체** | **?** | **?** | **?** | **?%** | **$?.??** |

> 비용은 로그의 cost 필드를 합산. 로그 100건 제한으로 잘린 경우 "최소 $?.?? (100건 기준)" 표기.

━━━ Part C: 라운드 최종 ━━━

| 구분 | 점수 | 등급 |
|------|------|------|
| 시황분석 (품질) | ?.?? | ? |
| 종목분석 (품질) | ?.?? | ? |
| 기술분석 (품질) | ?.?? | ? |
| 리스크관리 (품질) | ?.?? | ? |
| **전문가 평균** | **?.??** | **?** |
| **CIO 종합** | **?.??** | **?** |
| **품질 점수** | **?.??** | **= 전문가 70% + CIO 30%** |
| **효율성 점수** | **?.??** | **?** |
| ━━━━━━━━━━ | ━━━━ | ━━━━ |
| **라운드 최종 점수** | **?.??** | **= 품질 75% + 효율 25%** |
```

3라운드 전부 채점 완료 후, 반드시 **최종 순위표 + 차원별 비교 + 결론**을 출력하세요.

#### Step 6: 구조 평가 — spawn 방식이 최적인가?

3라운드 채점 데이터를 종합한 뒤, **CORTHEX의 현재 분석 아키텍처 자체**에 대해 평가하세요.

현재 구조:
```
CIO(처장) ─── 독자분석 (5번째 분석가 역할)
    │
    ├─ 시황분석 전문가 (MC) ──┐
    ├─ 종목분석 전문가 (SA) ──┤ 병렬 실행
    ├─ 기술분석 전문가 (TA) ──┤ + cross_agent_protocol로
    └─ 리스크관리 전문가 (RM) ─┘   서로 스폰 가능

    → 전원 완료 후 CIO가 종합 보고서 작성
```

아래 질문에 대해 **3라운드 실제 데이터를 근거로** 소신 있게 답하세요.
추측이 아닌 **로그와 보고서에서 관찰한 사실**에 기반해야 합니다.

```
## 구조 평가: spawn 아키텍처 진단

### 1. 교차 스폰(cross_agent_protocol)은 실질적으로 유용했나?
- 3라운드 통틀어 교차 스폰 총 건수: ?건
- 이 중 실질적으로 새 정보를 가져온 건수: ?건 (?%)
- 판정: [유용 / 유용하나 개선 필요 / 비용 대비 낭비]
- 근거: (구체적 사례)

### 2. CIO 독자분석("5번째 분석가")은 가치를 더했나?
- CIO가 전문가와 중복 없이 가져온 고유 데이터 포인트: ?개
- CIO 독자분석이 최종 보고서의 결론을 바꾼 사례: ?건
- 판정: [핵심 / 보완적 / 전문가와 중복이라 비효율]
- 근거: (구체적 사례)

### 3. 전문가 4명 구성은 적절한가?
- 3라운드에서 일관되게 기여도가 낮은 전문가: [없음 / 있으면 누구]
- 빠져도 전체 분석 품질에 영향 없는 전문가: [없음 / 있으면 누구]
- 추가하면 좋을 전문가 역할: [없음 / 있으면 어떤 역할]
- 판정: [4명 최적 / 3명으로 줄여도 됨 / 5명으로 늘려야 함]

### 4. 구조 개선 추천 (옵션 제시)

아래 중 가장 효과적인 옵션을 **순위**로 추천하세요:

| 옵션 | 설명 | 예상 효과 |
|------|------|-----------|
| A. 현행 유지 | 바꿀 필요 없음 | |
| B. 교차 스폰 제거 | CIO만 전문가 결과 종합, 전문가끼리 호출 금지 | |
| C. 공유 캐시 도입 | 한 전문가가 가져온 데이터를 다른 전문가가 재호출 없이 참조 | |
| D. 전문가 수 조정 | 특정 전문가 제거/추가/합병 | |
| E. 2단계 분석 | 1단계(데이터 수집 전문가) → 2단계(분석 전문가) 분리 | |
| F. 기타 | (자유 제안) | |

**추천 순위**: ? > ? > ? (근거 포함)

### 5. 비용 효율 종합

| 항목 | 라운드1 | 라운드2 | 라운드3 |
|------|---------|---------|---------|
| 총 도구 호출 수 | ? | ? | ? |
| 중복 호출 수 | ? | ? | ? |
| 추정 API 비용 | $? | $? | $? |
| 중복으로 낭비된 추정 비용 | $? | $? | $? |
| 유효 정보량 (고유 호출 수) | ? | ? | ? |

**한 줄 결론**: (예: "3라운드 평균 중복률 15%, 교차 스폰 제거만으로 비용 20% 절감 가능")
```

---

3라운드 전부 채점 완료 후, 반드시 출력 순서:
1. **라운드별 채점** (Part A + B + C) × 3
2. **최종 순위표 + 차원별 비교 + 결론**
3. **구조 평가** (Step 6)

---

## 프롬프트 끝

### 사용법

1. 위 프롬프트 전체를 새 채팅에 붙여넣기
2. 그 아래에 라운드별 데이터 첨부:
   - `[라운드 1 보고서]` + `[라운드 1 활동 로그]`
   - `[라운드 2 보고서]` + `[라운드 2 활동 로그]`
   - `[라운드 3 보고서]` + `[라운드 3 활동 로그]`
3. 한 번에 3라운드 다 줘도 되고, 라운드별로 나눠서 줘도 됨
4. 3라운드 채점 완료 후 "모델 공개해줘"라고 하면 라운드-모델 매핑 요청
