# kr_stock — 한국 주식 시세/기술지표 도구 가이드

## 이 도구는 뭔가요?
한국거래소(코스피/코스닥)에서 주식 가격, 거래량, 시가총액을 가져오고,
기술적 지표(RSI, MACD, 볼린저밴드)까지 자동으로 계산해주는 도구입니다.
실제 트레이더가 HTS(증권사 프로그램)에서 차트를 보는 것과 같습니다.

## 어떤 기술을 쓰나요?
- **pykrx** 라이브러리 — 한국거래소 공개 데이터
- **pandas-ta** 라이브러리 — 기술적 지표(RSI, MACD 등) 자동 계산
- 비용: **완전 무료** (API 키 불필요)

## 사용법

### action=price (현재 주가 조회)
```
action=price, name="종목명"
```
- 종목의 현재가, 전일 대비 변동, 거래량 반환
- 종목 코드(005930) 또는 이름("삼성전자") 모두 가능

**예시:**
- `action=price, name="삼성전자"` → "현재가: 71,500원 (+1.4%), 거래량: 12,345,678주"
- `action=price, name="카카오"` → "현재가: 42,300원 (-0.7%)"

### action=ohlcv (기간별 시세 조회)
```
action=ohlcv, name="종목명", fromdate="시작일"
```
- OHLCV = 시가(Open), 고가(High), 저가(Low), 종가(Close), 거래량(Volume)
- 날짜 형식: YYYYMMDD (예: "20250101")

**예시:**
- `action=ohlcv, name="삼성전자", fromdate="20250101"` → 2025년 1월 1일부터 매일 시세

### action=indicators (기술적 지표 계산)
```
action=indicators, name="종목명"
```
자동으로 계산해주는 지표:
| 지표 | 뭔가요? | 활용법 |
|---|---|---|
| RSI | 과매수/과매도 판단 (0~100) | 70 이상이면 "너무 많이 올랐다", 30 이하면 "너무 많이 떨어졌다" |
| MACD | 추세 전환 신호 | MACD가 시그널선 위로 올라가면 "매수 신호", 아래로 내려가면 "매도 신호" |
| 볼린저밴드 | 가격 변동 범위 | 상단 밴드 돌파 → 과열, 하단 밴드 이탈 → 과매도 |
| 이동평균선 | 5/20/60/120일 평균가격 | 단기선이 장기선 위에 있으면 상승 추세 |

**예시:**
- `action=indicators, name="삼성전자"` → RSI: 62, MACD: 양의 영역, 볼린저: 중간...

### action=market_cap (시가총액 순위)
```
action=market_cap, count=20
```
- 시가총액 상위 종목 목록 (기본 20개)

---

## 이 도구를 쓰는 에이전트들

### 1. 종목분석 Specialist
**언제 쓰나?** 특정 종목의 기본 정보를 확인할 때
**어떻게 쓰나?**
- `action=price`로 현재가 확인
- `action=ohlcv`로 최근 주가 흐름 파악
- `action=market_cap`으로 시장 내 위치(순위) 확인
- dart_api(재무제표)와 함께 쓰면 "주가 + 재무" 종합 분석 가능

**실전 시나리오:**
> CEO가 "삼성전자 살만해?" 라고 물으면:
> 1. `kr_stock action=price, name="삼성전자"` → 현재가 71,500원
> 2. `kr_stock action=ohlcv, name="삼성전자", fromdate="20250101"` → 올해 추이
> 3. `dart_api action=financial, company="삼성전자"` → 매출/이익 확인
> 4. 종합: "현재 71,500원, 올해 +15% 상승, PER 12배로 역사적 평균 수준"

### 2. 기술적분석 Specialist
**언제 쓰나?** 매매 타이밍을 판단할 때
**어떻게 쓰나?**
- **반드시 `action=indicators`를 먼저 실행**
- RSI, MACD, 볼린저밴드를 종합해서 매수/매도 시그널 판단
- `action=ohlcv`로 차트 패턴(이중바닥, 헤드앤숄더 등)도 확인

**실전 시나리오:**
> CEO가 "삼성전자 지금 사도 돼?" 라고 물으면:
> 1. `kr_stock action=indicators, name="삼성전자"`
>    → RSI: 62 (중립), MACD: 양(상승 추세), 볼린저: 중간대
> 2. `kr_stock action=ohlcv, name="삼성전자", fromdate="20250101"`
>    → 최근 20일선 위에서 지지 중
> 3. 판단: "RSI 중립, MACD 상승 추세, 20일선 지지 → 단기 상승 여력 있음. 진입가 70,000원, 손절 67,000원"

### 3. CIO 처장
**언제 쓰나?** 시장 전체 현황을 빠르게 파악할 때
**어떻게 쓰나?**
- `action=market_cap`으로 대형주 동향 확인
- `action=price`로 개별 종목 빠른 체크

---

## 주의사항
- 장 마감 후에는 당일 종가 기준. 실시간 호가는 아닙니다.
- 기술적 지표는 과거 데이터 기반이므로 미래를 보장하지 않습니다.
- 종목명으로 검색 시 동일한 이름이 여러 개일 수 있습니다 (우선주 등).
