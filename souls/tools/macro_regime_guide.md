# macro_regime — 매크로 레짐(경기 국면) 분석 도구 가이드

## 이 도구는 뭔가요?
증권사 거시경제 수석 연구원처럼, **지금 경기가 어디쯤인지** (회복? 확장? 과열? 침체?)를 판단하고 **그에 맞는 투자 전략**을 제안하는 도구입니다.
메릴린치 투자시계(Investment Clock)라는 유명한 프레임워크로 경기를 4분면(사분면)으로 나누고, 각 국면에서 어떤 자산이 유리한지 알려줍니다.

## 다른 투자 도구와 뭐가 다른가요?
| 항목 | kr_stock / technical_analyzer | macro_regime |
|------|------------------------------|-------------|
| 분석 대상 | **개별 종목** (삼성전자, 카카오 등) | **한국 경제 전체** (거시경제) |
| 분석 관점 | 주가 차트, 기술적 지표 | 기준금리, GDP, CPI, 실업률, PMI |
| 결과 | 이 종목을 사야 해? 팔아야 해? | 지금 주식을 사야 해? 채권을 사야 해? 현금을 들고 있어야 해? |
| 시간 프레임 | 단기~중기 (수일~수개월) | 중기~장기 (수개월~수년) |
| 데이터 소스 | pykrx (주가 데이터) | **LLM 지식 기반** (실시간 API 데이터 아님) |

## 어떤 기술을 쓰나요?
- **LLM 분석** — 모든 액션이 LLM 호출 기반입니다. LLM의 학습 데이터에 포함된 거시경제 지식을 활용합니다
- **메릴린치 투자시계 (Merrill Lynch Investment Clock)** — 경기를 4분면으로 나누는 글로벌 표준 프레임워크
- **NBER 경기순환이론** — 미국 경기 사이클 기준, 한국에도 적용
- 비용: **LLM 호출 비용만** (모든 액션에서 LLM 사용, 액션당 약 $0.01~$0.03)

> **중요**: 이 도구는 실시간 경제 데이터 API를 호출하지 않습니다. LLM의 학습 데이터에 포함된 최신 경제 지식을 기반으로 분석합니다. 따라서 아주 최근(며칠 전) 발표된 경제지표는 반영되지 않을 수 있습니다.

## 핵심 개념 — 메릴린치 투자시계 4분면

경기는 시계처럼 순환합니다. 4가지 국면이 반복됩니다:

| 국면 | 경제 성장 | 물가(인플레이션) | 최적 자산 순서 | 유리한 업종 |
|------|----------|-----------------|---------------|------------|
| ① 회복기 (Recovery) | 상승 ↑ | 하락 ↓ | 주식 > 채권 > 원자재 > 현금 | 기술주, 소비재, 금융주 |
| ② 확장기 (Expansion) | 상승 ↑ | 상승 ↑ | 원자재 > 주식 > 현금 > 채권 | 에너지, 소재, 산업재 |
| ③ 과열기 (Overheating) | 하락 ↓ | 상승 ↑ | 현금 > 원자재 > 채권 > 주식 | 에너지, 유틸리티 |
| ④ 침체기 (Recession) | 하락 ↓ | 하락 ↓ | 채권 > 현금 > 주식 > 원자재 | 헬스케어, 필수소비재, 유틸리티 |

## 사용법

### action=full (종합 국면 판단) — 가장 많이 쓰게 될 액션
```
action=full
```
- 현재 경기 국면 (4분면 중 하나) 판정
- 근거 데이터: 기준금리, GDP 성장률, CPI, 실업률, PMI, 원달러 환율
- 금리 방향 (인상/동결/인하 사이클)
- 선행지표 신호: OECD CLI(경기선행지수), 장단기금리차
- 국면별 추천 자산 + 업종 추천/비추천
- 주요 리스크 요인
- LLM이 메릴린치 투자시계 프레임워크로 **교수급 종합 분석** 제공

### action=regime (경기 국면 분류)
```
action=regime
```
분석 내용:
| 항목 | 설명 | 활용법 |
|------|------|--------|
| 4분면 분류 | 현재 한국 경기가 4분면 중 어디인지 판정 | 자산 배분의 가장 기본적인 출발점 |
| 성장/인플레 방향 | 경제 성장이 올라가는지 내려가는지, 물가가 올라가는지 내려가는지 | 두 축의 방향으로 국면 결정 |
| 국면별 최적 자산 | 해당 국면에서 가장 유리한 자산 종류 | 포트폴리오 리밸런싱 근거 |

### action=rates (금리 환경 분석)
```
action=rates
```
분석 내용:
| 항목 | 설명 | 활용법 |
|------|------|--------|
| 한국은행 기준금리 | 현재 수준 + 최근 변동 이력 | 금리 사이클 위치 파악 |
| 국고채 금리 (3년/10년) | 시장 금리 수준 | 채권 투자 판단, 주식 밸류에이션 기준 |
| 장단기금리차 (10년-2년) | 경기 침체 예측 지표 | 역전(마이너스)되면 침체 경고 |
| 한미 금리차 | 한국-미국 금리 차이 | 환율/외국인 자금 흐름 판단 |
| 금리 방향 전망 | 인상/동결/인하 예측 | 주식/채권 비중 조절 |
| 주식시장 영향 | 금리 변화가 주식에 미치는 영향 | 성장주 vs 가치주 선택 근거 |

### action=leading (선행지표 분석)
```
action=leading
```
분석 내용:
| 항목 | 설명 | 활용법 |
|------|------|--------|
| OECD CLI | OECD 경기선행지수 (100 기준) | 100 이상 = 확장, 100 미만 = 수축 |
| 제조업 PMI | 구매관리자지수 (50 기준) | 50 이상 = 제조업 확장, 50 미만 = 수축 |
| 소비자신뢰지수 | 소비자 심리 | 높으면 소비 증가 예상 → 내수주 유리 |
| 재고순환지표 | 재고 대비 출하 비율 | 재고 감소 + 출하 증가 = 경기 회복 신호 |
| 수출입 동향 | 수출 증감률 | 한국은 수출 의존도 높아 핵심 선행지표 |
| 종합 판단 | 경기 상승/하강 국면 예측 | 3~6개월 뒤 경기 방향 미리 파악 |

### action=strategy (국면별 투자 전략 추천) — CIO가 자주 쓸 액션
```
action=strategy
```
분석 내용:
| 항목 | 설명 | 활용법 |
|------|------|--------|
| 현재 국면 요약 | 1줄 요약 | 빠른 상황 파악 |
| 추천 자산 배분 비율 | 주식/채권/원자재/현금/대안 비율 | 포트폴리오 리밸런싱 기준 |
| 주식 스타일 | 성장주 vs 가치주 vs 배당주 | 종목 선택 방향 |
| 추천 업종 TOP 5 | 현재 국면에서 유리한 업종 + 이유 | 업종 ETF 매수/개별 종목 스크리닝 |
| 비추천 업종 TOP 3 | 현재 국면에서 불리한 업종 + 이유 | 포트폴리오에서 비중 축소 |
| 헷지 전략 | 위험 관리 방법 | 하락장 대비 |
| 6개월 시나리오 | 낙관/기본/비관 3가지 전망 | 시나리오별 대응 전략 |

---

## 이 도구를 쓰는 에이전트들

### 1. CIO (투자분석처장)
**언제 쓰나?** 포트폴리오 전체 방향을 잡거나, 자산 배분 비율을 결정할 때
**어떻게 쓰나?**
- `action=full`로 현재 경기 국면 파악 → 자산 배분 대방향 설정
- `action=strategy`로 구체적인 업종/스타일 추천 → 종목 선택 지시

**실전 시나리오:**
> CEO가 "지금 주식 비중 늘려도 돼?" 라고 물으면:
> 1. `macro_regime action=full` → 현재 국면: 회복기 (성장↑, 인플레↓)
> 2. `macro_regime action=strategy` → 추천 배분: 주식 60%, 채권 25%, 현금 10%, 대안 5%
> 3. `macro_regime action=rates` → 금리 인하 사이클 진입, 성장주에 유리
> 4. 보고: "현재 회복기 국면이라 주식이 가장 유리한 시기입니다. 주식 비중을 60%까지 늘리되, 성장주(기술/소비재) 중심으로 편입하는 것을 추천합니다. 다만 한미 금리차 확대로 환율 리스크가 있어 10% 현금은 유지하세요."

### 2. 시황분석 Specialist
**언제 쓰나?** CIO에게 거시경제 브리핑을 제공하거나, 시장 전체 방향을 분석할 때
**어떻게 쓰나?**
- `action=regime`으로 현재 4분면 위치 파악
- `action=leading`으로 선행지표 점검 → 다음 국면 전환 시점 예측
- `action=rates`로 금리 환경 분석 → 금리 민감 업종 영향 판단

**실전 시나리오:**
> CIO가 "이번 주 시황 브리핑 준비해줘" 라고 지시하면:
> 1. `action=regime` → 한국 경기: 회복기 후반, 확장기 진입 가능성
> 2. `action=leading` → OECD CLI 101.2 (확장), PMI 52.3 (확장), 수출 +8.5%
> 3. `action=rates` → 기준금리 3.0%, 장단기금리차 0.4%p (정상), 인하 기대
> 4. 보고:
>    - "선행지표 3개 모두 확장 신호 → 회복기에서 확장기로 전환 중"
>    - "금리 인하 기대 + 수출 호조 → 기술주/산업재 유리"
>    - "리스크: 원달러 환율 1,350원 돌파 시 외국인 매도 압력 주의"

---

## 파라미터 정리

| 파라미터 | 필수 | 타입 | 설명 |
|---------|------|------|------|
| action | X | string | full / regime / rates / leading / strategy (기본값: full) |

> **참고**: 이 도구는 개별 종목을 분석하지 않습니다. name이나 ticker 파라미터가 없습니다. 한국 경제 전체의 거시경제 국면을 분석하는 도구입니다.

## 액션 조합 가이드 — 상황별 추천 조합

| 상황 | 추천 액션 조합 | 이유 |
|------|--------------|------|
| "지금 어떤 장이야?" | `action=regime` | 4분면 분류만 빠르게 |
| "포트폴리오 리밸런싱" | `action=full` → `action=strategy` | 국면 파악 + 구체적 배분 비율 |
| "금리 영향 분석" | `action=rates` → `action=strategy` | 금리 방향 + 그에 맞는 전략 |
| "6개월 뒤 전망" | `action=leading` → `action=strategy` | 선행지표로 다음 국면 예측 + 대응 |
| CEO 주간 브리핑 | `action=full` 하나로 충분 | 7가지 항목 전부 포함 |

## 주의사항
- **실시간 데이터가 아닙니다**: 모든 분석이 LLM의 학습 데이터 기반입니다. 어제 발표된 경제지표가 즉시 반영되지는 않습니다. 최신 지표 확인이 필요하면 한국은행(ECOS) 또는 통계청 직접 확인이 더 정확합니다.
- **LLM 비용**: 5개 액션 모두 LLM을 호출합니다. action=full이 가장 긴 프롬프트를 사용하므로 비용이 가장 높습니다 (약 $0.02~$0.03).
- **한국 경제 특화**: 분석 프롬프트가 한국 경제에 맞춰져 있습니다 (한국은행 기준금리, 원달러 환율, 한국 PMI 등).
- **투자 판단 보조 도구**: 거시경제 국면은 참고 자료입니다. 실제 투자 결정은 개별 종목 분석(technical_analyzer, earnings_surprise)과 함께 종합 판단하세요.
- **국면 전환 시차**: 경기 국면은 수개월에 걸쳐 전환됩니다. 어제 "회복기"였다고 오늘 갑자기 "과열기"가 되지 않습니다. 월 1회 정도 확인하면 충분합니다.
