# dividend_calendar — 배당 캘린더 도구 가이드

## 이 도구는 뭔가요?
주식 배당(기업이 이익의 일부를 주주에게 나눠주는 것)과 관련된 정보를 제공하는 도구입니다. 월별 배당 종목, 특정 기업의 배당 이력, 배당수익률 상위 종목을 조회할 수 있습니다. 배당 투자 전략을 세울 때 핵심 도구입니다.

## 어떤 API를 쓰나요?
- **pykrx** (한국거래소 배당/기초 데이터)
- **DART API** (선택 — 배당 공시 조회 시)
- 비용: **무료**
- 필요한 키: `DART_API_KEY` (선택 — 없어도 기본 기능은 pykrx로 동작)

## 사용법

### action=calendar (월별 배당 종목 정보)
```
action=calendar, month="2026-03"
```
- 특정 월 기준 배당을 지급하는 종목 목록을 보여줍니다.
- 배당수익률 상위 30개 종목을 정렬하여 표시합니다.
- 배당 시즌(12월/3~4월/6월)에 대한 안내도 포함됩니다.
- AI가 주목할 종목과 배당 투자 전략을 분석합니다.

**파라미터:**
| 파라미터 | 설명 | 기본값 |
|---------|------|--------|
| month | 대상 월 (YYYY-MM 형식) | 현재 월 |

**배당 시즌 참고:**
| 월 | 의미 |
|----|------|
| 12~1월 | 대부분 기업의 배당 기준일 — 핵심 배당 시즌 |
| 3~4월 | 전년도 배당금이 실제 지급되는 시기 |
| 6~7월 | 중간배당 기준일이 있는 기업 |

**예시:**
- `action=calendar, month="2026-12"` → 12월 배당 시즌 종목 정보
- `action=calendar` → 이번 달 배당 종목 현황

### action=history (기업별 배당 이력)
```
action=history, company="삼성전자", years=5
```
- 특정 기업의 과거 N년간 배당수익률, PER, PBR 변화를 보여줍니다.
- 배당 추이(안정적/증가/감소)를 파악할 수 있습니다.
- 현재 배당수익률이 평균 대비 높은지/낮은지 자동 판단합니다.
- AI가 배당 정책 평가와 투자 의견을 제시합니다.

**파라미터:**
| 파라미터 | 설명 | 기본값 |
|---------|------|--------|
| company | 기업명 | (필수) |
| years | 조회 연수 | 5 |

**예시:**
- `action=history, company="삼성전자", years=5` → 삼성전자 5년간 배당 이력
- `action=history, company="KT", years=10` → KT 10년간 배당 추이

### action=top (배당수익률 상위 종목)
```
action=top, market="ALL", top_n=20
```
- 현재 시점 배당수익률이 가장 높은 종목을 순위로 보여줍니다.
- 종목명, 배당수익률, PER, 시가총액, 시장을 함께 표시합니다.
- AI가 실질적으로 투자할 만한 우량 배당주를 선정하고 배당 함정을 경고합니다.

**파라미터:**
| 파라미터 | 설명 | 기본값 |
|---------|------|--------|
| market | "KOSPI", "KOSDAQ", "ALL" | "ALL" |
| top_n | 상위 N개 | 20 |

**예시:**
- `action=top, top_n=30` → 전체 시장 배당수익률 TOP 30
- `action=top, market="KOSPI", top_n=10` → 코스피 배당 TOP 10

## 이 도구를 쓰는 에이전트들

### 1. 투자분석처장 (CIO)
**언제 쓰나?** 배당 투자 전략을 수립하거나, 포트폴리오의 배당 수익을 분석할 때
**어떻게 쓰나?**
- calendar로 배당 시즌 전 투자 대상 종목 물색
- top으로 고배당 종목 발굴
- history로 배당 지속성 검증

**실전 시나리오:**
> CEO가 "안정적인 배당주 좀 추천해줘" 라고 하면:
> 1. `action=top, market="KOSPI", top_n=20` 으로 고배당 종목 조회
> 2. 상위 종목 중 시총 5000억 이상인 대형주 선별
> 3. 각 종목에 대해 `action=history, company="종목명"` 으로 배당 지속성 확인
> 4. "KT, SK텔레콤, 하나금융 — 5년 연속 배당 증가, 배당수익률 4~6%" 보고

### 2. 종목분석 Specialist
**언제 쓰나?** 종목 분석 시 배당 매력도를 평가할 때
**어떻게 쓰나?**
- 분석 대상 종목의 배당 이력(history)을 확인하여 배당 정책 파악
- 동종업체의 배당수익률을 top/calendar로 비교

**실전 시나리오:**
> CEO가 "삼성전자 배당 얼마나 받을 수 있어?" 라고 하면:
> 1. `action=history, company="삼성전자", years=5` 로 배당 이력 조회
> 2. "삼성전자 5년 평균 배당수익률 2.1%, 최근 연도 2.5% — 평균보다 높아 매력적" 보고
> 3. 1000만원 투자 시 예상 배당금 = 약 25만원(세전) 계산

## 주의사항
- 배당수익률은 **과거 실적 기준**이며, 미래 배당을 보장하지 않습니다.
- 배당수익률이 비정상적으로 높은 종목(10% 이상)은 **배당 함정**일 수 있습니다 (주가가 급락해서 수익률이 높아진 경우, 일회성 특별배당 등).
- 배당 기준일 전에 매수해야 배당을 받을 수 있습니다. 기준일 이후 매수하면 해당 배당은 받을 수 없습니다.
- pykrx 라이브러리가 서버에 설치되어 있어야 합니다.
