# global_market_tool — 글로벌 시장 도구 가이드

## 이 도구는 뭔가요?
미국/일본/유럽 등 해외 주식, 글로벌 주요 지수(S&P500, 나스닥 등), 암호화폐(비트코인, 이더리움), 환율(달러/원 등)을 한꺼번에 조회하는 도구입니다. 한국 시장만 보면 놓칠 수 있는 글로벌 흐름을 파악할 수 있습니다.

## 어떤 API를 쓰나요?
- **yfinance** (Yahoo Finance 데이터 — 주식/지수/환율)
- **CoinGecko API** (암호화폐 시세 — https://api.coingecko.com/)
- 비용: **무료** (API 키 불필요)
- 필요한 키: 없음

## 사용법

### action=stock (해외 개별 주식 조회)
```
action=stock, symbol="AAPL", period="1mo"
```
- 해외 개별 주식의 현재가, 전일 대비, 시가총액, PER, 배당수익률 등을 조회합니다.
- 기간 수익률도 함께 제공합니다.

**파라미터:**
| 파라미터 | 설명 | 기본값 |
|---------|------|--------|
| symbol | 주식 심볼 (필수) | - |
| period | 조회 기간 (1d/5d/1mo/3mo/6mo/1y/5y) | "1mo" |

**주요 심볼:**
| 심볼 | 기업명 |
|------|--------|
| AAPL | 애플 |
| TSLA | 테슬라 |
| NVDA | 엔비디아 |
| MSFT | 마이크로소프트 |
| AMZN | 아마존 |
| GOOGL | 구글(알파벳) |
| META | 메타(페이스북) |

**예시:**
- `action=stock, symbol="NVDA"` → 엔비디아 현재가, PER, 시총, 1개월 수익률
- `action=stock, symbol="TSLA", period="3mo"` → 테슬라 3개월 성과

### action=index (글로벌 주요 지수 조회)
```
action=index, indices="S&P500,나스닥,다우존스"
```
- 세계 주요 주가지수의 현재 수준과 전일 대비 등락을 한눈에 보여줍니다.
- indices를 지정하지 않으면 8개 주요 지수 전체를 조회합니다.

**조회 가능한 지수:**
| 이름 | 시장 |
|------|------|
| S&P500 | 미국 대형주 500개 |
| 나스닥 | 미국 기술주 중심 |
| 다우존스 | 미국 우량주 30개 |
| 니케이225 | 일본 대형주 225개 |
| 항셍 | 홍콩 대형주 |
| 유로스톡스50 | 유럽 대형주 50개 |
| DAX | 독일 대형주 |
| FTSE100 | 영국 대형주 100개 |

**예시:**
- `action=index` → 전체 8개 지수 현황
- `action=index, indices="S&P500,니케이225"` → 미국/일본 지수만

### action=crypto (암호화폐 시세 조회)
```
action=crypto, coins="bitcoin,ethereum", currency="usd"
```
- 암호화폐의 현재 가격, 24시간 변동률, 시가총액, 거래량을 조회합니다.
- CoinGecko API를 사용하므로 API 키가 필요 없습니다.

**파라미터:**
| 파라미터 | 설명 | 기본값 |
|---------|------|--------|
| coins | 코인 ID (쉼표 구분) | "bitcoin,ethereum" |
| currency | 표시 통화 | "usd" |

**예시:**
- `action=crypto` → 비트코인, 이더리움 시세
- `action=crypto, coins="bitcoin,ethereum,solana,cardano"` → 4개 코인 시세

### action=forex (환율 조회)
```
action=forex, pairs="USDKRW=X,EURUSD=X"
```
- 주요 환율 현황을 조회합니다.
- 기본으로 달러/원, 유로/달러, 달러/엔, 파운드/달러를 조회합니다.

**조회 가능한 환율:**
| 코드 | 이름 |
|------|------|
| USDKRW=X | 달러/원 |
| EURUSD=X | 유로/달러 |
| USDJPY=X | 달러/엔 |
| GBPUSD=X | 파운드/달러 |
| EURJPY=X | 유로/엔 |
| CNYKRW=X | 위안/원 |

**예시:**
- `action=forex` → 주요 4개 환율 현황
- `action=forex, pairs="USDKRW=X,CNYKRW=X"` → 달러/원, 위안/원만

### action=compare (한국 vs 글로벌 비교)
```
action=compare, period="1mo"
```
- 한국(코스피/코스닥)과 글로벌(S&P500/나스닥/니케이) 지수의 기간 수익률을 비교합니다.
- AI가 비교 분석 인사이트를 제공합니다.

**예시:**
- `action=compare, period="3mo"` → 3개월간 한국 vs 글로벌 지수 성과 비교
- `action=compare, period="1y"` → 1년간 비교

## 이 도구를 쓰는 에이전트들

### 1. 투자분석처장 (CIO)
**언제 쓰나?** 글로벌 시장 동향을 파악하고, 한국 시장에 미칠 영향을 분석할 때
**어떻게 쓰나?**
- 매일 index로 글로벌 지수 현황 확인
- forex로 환율 변동 모니터링
- compare로 한국 시장의 글로벌 대비 상대적 위치 파악

**실전 시나리오:**
> CEO가 "오늘 세계 시장은 어때?" 라고 하면:
> 1. `action=index` 로 전체 지수 현황 조회
> 2. `action=forex` 로 환율 확인
> 3. "S&P500 +1.2%, 나스닥 +1.8%, 달러/원 1,350원 — 글로벌 위험자산 선호 분위기, 한국 시장 긍정적" 보고

### 2. 시황분석 Specialist
**언제 쓰나?** 거시경제 분석 시 글로벌 시장 데이터가 필요할 때
**어떻게 쓰나?**
- index와 forex를 종합하여 글로벌 자금 흐름 파악
- compare로 한국 시장의 디커플링(탈동조화) 여부 판단

**실전 시나리오:**
> CEO가 "미국이 금리 올리면 한국은 어떻게 돼?" 라고 하면:
> 1. `action=compare, period="3mo"` 로 최근 3개월 한국 vs 미국 비교
> 2. `action=forex` 로 달러/원 환율 추이 확인
> 3. 금리 인상 → 달러 강세 → 원화 약세 → 외국인 자금 유출 시나리오 분석

### 3. 종목분석 Specialist
**언제 쓰나?** 글로벌 피어(동종 해외 기업) 비교가 필요할 때
**어떻게 쓰나?**
- 한국 기업과 해외 동종업체의 주가/밸류에이션 비교
- 예: 삼성전자 vs TSMC, 현대차 vs 도요타

**실전 시나리오:**
> CEO가 "삼성전자가 TSMC보다 싼 거야?" 라고 하면:
> 1. `action=stock, symbol="TSM"` 으로 TSMC 정보 조회 (PER, 시총)
> 2. kr_stock으로 삼성전자 정보 조회
> 3. 두 기업의 PER, PBR, 시총을 비교하여 상대 가치 판단

### 4. 리스크관리 Specialist
**언제 쓰나?** 포트폴리오의 글로벌 상관관계를 분석하고 리스크를 측정할 때
**어떻게 쓰나?**
- compare로 한국/글로벌 시장 간 상관관계 확인
- 글로벌 시장 급락 시 한국 시장 영향도 추정

**실전 시나리오:**
> CEO가 "미국 폭락하면 우리 포트폴리오 얼마나 빠져?" 라고 하면:
> 1. `action=compare, period="1y"` 로 한국-미국 연동성 확인
> 2. 과거 S&P500 -5% 시 코스피 평균 -3~4% 하락 패턴 분석
> 3. 현재 포트폴리오 예상 손실 규모 계산

## 주의사항
- yfinance 데이터는 **실시간이 아닌 15~20분 지연** 데이터일 수 있습니다.
- CoinGecko API는 **무료 계정 기준 분당 호출 제한**이 있습니다. 너무 자주 호출하지 마세요.
- 해외 시장은 시간대가 다릅니다. 미국 시장은 한국 시간 밤 11시 30분~새벽 6시에 열립니다.
- yfinance 라이브러리가 서버에 설치되어 있어야 합니다.
