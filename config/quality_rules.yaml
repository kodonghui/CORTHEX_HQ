# CORTHEX HQ 품질 게이트 규칙 설정
# 하이브리드 루브릭: 체크리스트(통과/불통과) + 점수(1/3/5) 병행
# 검수 모델: 각 매니저가 자기 모델 사용 (별도 review_model 없음)
#
# 루브릭 설계 원칙 (리트마스터 3차 검수 루브릭 기반):
# 1. 1/3/5 서술은 추상적 형용사가 아닌 구체적 오류 유형 + 예시로 작성
# 2. ★치명적(critical) 항목이 1점이면 → 전체 가중 평균 최대 2.0으로 제한
# 3. 부서별 5개 평가 차원, 가중치 합계 100%

rules:
  min_length: 50
  max_retry: 2
  check_hallucination: true
  check_relevance: true

# 합격 기준
pass_criteria:
  all_required_pass: true
  min_average_score: 3.0
  # ★치명적 항목이 1점이면 가중 평균을 이 값으로 제한 (리트마스터 Q1→Q0 패턴)
  critical_cap: 2.0

# ─────────────────────────────────────────────
# 공통 체크리스트 (모든 부서에 적용)
# ─────────────────────────────────────────────
common_checklist:
  required:
    - id: C1
      label: "업무 지시에 실제로 답하고 있는가?"
    - id: C2
      label: "빈 응답/에러가 아닌가?"
  optional:
    - id: C3
      label: "비개발자가 이해 가능한 수준인가?"
    - id: C4
      label: "결론이 먼저 제시되어 있는가? (BLUF)"

# ─────────────────────────────────────────────
# 부서별 루브릭 (체크리스트 + 점수)
# 각 부서 5개 평가 차원, 리트마스터 수준 상세 기준
# ─────────────────────────────────────────────
rubrics:

  # ═══════════════════════════════════════════
  # 기본 (부서 미지정 시 적용)
  # ═══════════════════════════════════════════
  default:
    name: "기본 검수 기준"
    department_checklist:
      required: []
      optional: []
    scoring:
      - id: Q1
        label: "관련성"
        weight: 25
        critical: true
        criteria:
          1: "업무 지시의 핵심 질문을 다루지 않음. 전혀 다른 주제를 설명하거나, 질문과 무관한 일반론만 나열"
          3: "업무 지시의 핵심은 다루나, 요청 항목 중 1~2개를 누락했거나 결론에 반영하지 않음"
          5: "업무 지시의 모든 항목에 직접 답하고, 결론이 요청 범위를 벗어나지 않음"
      - id: Q2
        label: "구체성"
        weight: 25
        critical: false
        criteria:
          1: "막연한 일반론만 나열 ('열심히 해야 합니다', '중요한 분야입니다'). 수치/사례/근거가 전무"
          3: "일부 구체적 내용(수치 1~2개 또는 사례 1건)이 있으나, 핵심 주장의 뒷받침으로는 부족"
          5: "주요 주장마다 수치/사례/출처 등 구체적 근거가 뒷받침되어 '왜 그런가?'에 답할 수 있음"
      - id: Q3
        label: "신뢰성"
        weight: 20
        critical: true
        criteria:
          1: "출처 없는 수치를 제시하거나, 존재하지 않는 기관/보고서를 인용. 확인 불가능한 출처 다수"
          3: "대체로 신뢰할 만하나, 1~2건의 수치가 출처 불명이거나 시점이 오래됨 (예: 2020년 데이터를 현재로 제시)"
          5: "모든 수치에 출처(기관명, 보고서명, 날짜)가 명시되고 확인 가능. '~에 따르면' 사용 시 출처 추적 가능"
      - id: Q4
        label: "완결성"
        weight: 15
        critical: false
        criteria:
          1: "요청 범위의 절반 이하만 다루거나 핵심 항목 누락. 예: 3개 분석 요청에 1개만 답변"
          3: "요청 범위의 대부분을 다루나 일부가 피상적 (제목만 있고 내용 부족, 또는 한 줄로 마무리)"
          5: "요청 범위를 빠짐없이 다루고 각 항목의 깊이가 일관됨. 추가 질문 없이 바로 활용 가능"
      - id: Q5
        label: "가독성"
        weight: 15
        critical: false
        criteria:
          1: "문장이 과밀하거나 같은 내용을 반복. 구분 없이 이어져 핵심을 찾기 어려움"
          3: "읽히지만 일부 장황하거나, 소제목/번호 없이 긴 단락으로 구성"
          5: "제목-소제목-본문 구조가 명확하고, 핵심이 앞에 오며, 한 번 읽어 바로 이해 가능"

  # ═══════════════════════════════════════════
  # 비서실 (chief_of_staff)
  # ═══════════════════════════════════════════
  secretary:
    name: "비서실 검수 기준"
    department_checklist:
      required:
        - id: D1
          label: "CEO 지시사항을 빠짐없이 반영했는가?"
      optional:
        - id: D2
          label: "일정/마감 등 시간 정보가 포함되어 있는가?"
    scoring:
      - id: Q1
        label: "지시 충실도"
        weight: 25
        critical: true
        criteria:
          1: "CEO 지시의 핵심 요구를 파악하지 못하고 동문서답. 지시 사항 중 절반 이상 미반영. 예: '내일 회의 자료 정리해줘'에 회의와 무관한 내용 작성"
          3: "CEO 지시의 핵심은 반영했으나, 세부 요구 1~2개를 놓치거나 우선순위를 잘못 판단. 예: '급한 건 먼저'라 했는데 중요도 구분 없이 나열"
          5: "CEO 지시의 모든 항목을 빠짐없이 반영하고, 지시에 명시되지 않았으나 맥락상 필요한 사항까지 선제적으로 포함"
      - id: Q2
        label: "완결성"
        weight: 20
        critical: false
        criteria:
          1: "지시 사항 3개 중 1개만 처리하거나 핵심 항목 누락. 결론이 없거나 중간에 끊김"
          3: "대부분 다루나, 1~2개 항목이 제목만 있고 내용이 비거나 '추후 확인 필요'로 마무리"
          5: "모든 지시 항목에 대해 조치 내용이 구체적으로 기술됨. 추가 확인 없이 바로 실행 가능"
      - id: Q3
        label: "실행 가능성"
        weight: 20
        critical: false
        criteria:
          1: "'잘 해봅시다', '검토가 필요합니다' 같은 추상적 결론만 있음. 누가/언제/무엇을 해야 하는지 불명확"
          3: "액션 아이템은 있으나 담당자/기한이 빠져있거나, '~하면 좋겠습니다' 수준의 제안으로 끝남"
          5: "각 액션 아이템에 담당자/기한/구체적 방법이 명시됨. 대표님이 '이대로 하자'라고 바로 결재 가능한 수준"
      - id: Q4
        label: "명확성"
        weight: 20
        critical: false
        criteria:
          1: "전문 용어를 설명 없이 남발하거나, 주어가 생략되어 누가 무엇을 하라는 건지 불분명. 한 문장이 3줄 이상"
          3: "대체로 이해 가능하나, 1~2군데 '이게 무슨 뜻이지?' 하고 다시 읽어야 하는 부분이 있음"
          5: "비전문가(대표님)가 한 번 읽고 즉시 이해 가능. 전문 용어에는 괄호 설명, 문장이 간결함"
      - id: Q5
        label: "시의성"
        weight: 15
        critical: false
        criteria:
          1: "마감/일정 정보가 전혀 없거나, 긴급한 사안인데 긴급성 표시 없음. 이미 지난 일정을 제시"
          3: "일정은 언급했으나 구체적 날짜가 빠져있거나 ('이번 주 중으로'), 긴급도 구분이 없음"
          5: "마감일/중간 점검일이 명시되고, 긴급/일반/참고 등 우선순위가 구분됨. 캘린더에 바로 옮길 수 있는 수준"

  # ═══════════════════════════════════════════
  # 전략기획팀 (cso_manager)
  # ═══════════════════════════════════════════
  leet_master.strategy:
    name: "전략기획팀 검수 기준"
    department_checklist:
      required:
        - id: D1
          label: "시장 데이터/수치가 포함되어 있는가?"
        - id: D2
          label: "분석에서 결론까지 논리가 일관되는가?"
      optional:
        - id: D3
          label: "경쟁사 비교 분석이 있는가?"
    scoring:
      - id: Q1
        label: "데이터 근거"
        weight: 25
        critical: true
        criteria:
          1: "숫자 없이 '성장 가능성이 높다', '시장이 크다' 같은 의견만 나열. 출처 없는 '약 1조원 시장' 같은 허수"
          3: "TAM/SAM 중 1개 또는 핵심 수치 1~2개는 있으나, 출처가 불분명하거나 시점이 오래됨 (예: 2022년 데이터)"
          5: "TAM/SAM/SOM 또는 동등 수준의 시장 규모 수치가 출처(리서치 기관명, 보고서명, 연도)와 함께 제시. 핵심 주장마다 수치 뒷받침"
      - id: Q2
        label: "논리 일관성"
        weight: 20
        critical: false
        criteria:
          1: "전제와 결론이 모순되거나 연결이 없음. 예: '시장이 축소 중'이라 해놓고 '공격적 투자 필요'라 결론"
          3: "전체 흐름은 있으나, 중간 연결이 1~2곳 비약. '그러므로'로 연결했지만 왜 그런지 설명 생략"
          5: "현황분석→기회/위협 식별→전략 도출→실행계획이 단계별로 명확히 연결. 각 단계가 이전 단계의 결론에서 자연스럽게 도출"
      - id: Q3
        label: "시장 현실성"
        weight: 20
        critical: false
        criteria:
          1: "경쟁사 존재를 무시하거나 '블루오션'이라 단정. 진입장벽/규제/대체재 미고려"
          3: "경쟁사를 언급하나 피상적 ('네이버, 카카오 등'). 차별화 전략이 '더 좋은 서비스' 수준"
          5: "직접 경쟁사 2개+ 구체적 비교(기능, 가격, 점유율). 진입장벽/규제/대체재 위협을 현실적으로 평가하고 대응 전략 제시"
      - id: Q4
        label: "실행 로드맵"
        weight: 20
        critical: false
        criteria:
          1: "'~하면 좋겠다' 수준의 방향만 제시. 일정/예산/담당 전혀 없음"
          3: "분기별 방향은 있으나, 구체적 마일스톤/예산 규모/담당 조직이 빠져있거나 비현실적 (예: '1개월에 앱 출시')"
          5: "단계별 마일스톤(일정)/예상 비용/필요 인력/KPI가 명시됨. '이대로 실행에 옮기자'라고 결재 가능한 수준"
      - id: Q5
        label: "리스크 인식"
        weight: 15
        critical: false
        criteria:
          1: "장밋빛 전망만 있고 위험 요소 언급 없음. '반드시 성공', '확실히' 같은 확언"
          3: "리스크를 1~2개 언급하나 '주의가 필요합니다'로 끝. 대응 방안이 없거나 구체성 부족"
          5: "주요 리스크 3개+ 식별하고, 각각에 대해 발생 가능성/영향도/대응 방안을 구체적으로 제시. 최악의 시나리오(플랜 B) 포함"

  # ═══════════════════════════════════════════
  # 법무팀 (clo_manager)
  # ═══════════════════════════════════════════
  leet_master.legal:
    name: "법무팀 검수 기준"
    department_checklist:
      required:
        - id: D1
          label: "관련 법률/판례 인용이 있는가?"
        - id: D2
          label: "법적 리스크가 식별되어 있는가?"
      optional:
        - id: D3
          label: "각 리스크에 대한 대응 방안이 있는가?"
    scoring:
      - id: Q1
        label: "법적 정확성"
        weight: 25
        critical: true
        criteria:
          1: "조문 번호 없이 '관련 법률에 의하면' 식 인용. 존재하지 않는 판례 번호 기재. 폐지된 조항을 현행법으로 적용. '할 수 있다'(재량)를 '하여야 한다'(의무)로 오독"
          3: "조문은 맞으나 적용 요건 중 1~2개를 생략. 판례 취지는 맞으나 사건번호/연도가 부정확. 최신 개정 사항 미반영"
          5: "법률명+조항+호까지 정확히 인용. 판례는 사건번호/선고일/요지가 명시됨. 재량/의무/간주/추정 등 법적 양태 구분이 정확"
      - id: Q2
        label: "근거 출처"
        weight: 20
        critical: false
        criteria:
          1: "법령 밖의 상식/이론을 판정 근거로 사용. '일반적으로...', '통념상...', '실무에서는 보통...' 같은 근거 불명 서술이 핵심 논거"
          3: "주된 근거는 법령/판례이나, 일부 핵심 판단이 '보통은~', '해석상~' 같은 비공식 근거에 기댐"
          5: "모든 핵심 법적 판단이 법령 조항 또는 판례에 직접 매핑됨. 'X법 Y조 Z항에 따르면' 형태로 추적 가능"
      - id: Q3
        label: "언어 정밀성"
        weight: 20
        critical: false
        criteria:
          1: "법률 용어 오용 다수. 주어 바뀜(채권자↔채무자), 범위 확장/축소 ('할 수 있다'→'된다'). '간주'와 '추정'을 혼용"
          3: "큰 실수는 없으나 한두 번 법률 용어가 부정확하거나, 단서 조항/예외 규정을 놓침"
          5: "주어/시점/양태(간주/재량/예외/단서)를 체계적으로 구분. 법률 용어의 기술적 의미가 정확히 사용됨"
      - id: Q4
        label: "리스크 식별"
        weight: 20
        critical: false
        criteria:
          1: "리스크 언급 없이 '적법합니다' 또는 '위법입니다'로만 결론. 잠재적 분쟁 가능성 미고려"
          3: "주요 리스크 1~2개 식별했으나, 발생 가능성이나 심각도 평가 없이 나열만 함"
          5: "현재 리스크 + 잠재 리스크를 구분하고, 각각의 발생 가능성/법적 결과(손해배상, 행정처분 등)를 구체적으로 평가"
      - id: Q5
        label: "대응 방안"
        weight: 15
        critical: false
        criteria:
          1: "리스크를 나열하고 '주의가 필요합니다'로 끝. 어떻게 대응할지 제시 없음"
          3: "일부 리스크에만 대응 방안이 있거나, '계약서에 명시하면 됩니다' 수준의 일반론"
          5: "각 리스크별 구체적 대응 방안 제시. 필요한 계약 조항, 규정 정비, 내부 절차 등 실행 가능한 수준"

  # ═══════════════════════════════════════════
  # 마케팅팀 (cmo_manager)
  # ═══════════════════════════════════════════
  leet_master.marketing:
    name: "마케팅팀 검수 기준"
    department_checklist:
      required:
        - id: D1
          label: "타겟 고객이 명확히 정의되어 있는가?"
      optional:
        - id: D2
          label: "KPI/성과 지표가 포함되어 있는가?"
        - id: D3
          label: "경쟁 콘텐츠와의 차별점이 있는가?"
    scoring:
      - id: Q1
        label: "타겟 명확성"
        weight: 25
        critical: true
        criteria:
          1: "'모든 수험생', 'MZ세대' 같은 전체 집단을 타겟으로 설정. 나이/상황/니즈 구분 없음"
          3: "타겟을 좁혔으나 ('법학 수험생') 구체적 페르소나(연령, 학습 단계, 주요 고민)가 빠져있음"
          5: "구체적 페르소나 정의 — 나이, 학습 단계(초시/재시), 주요 고민, 현재 사용 도구, 콘텐츠 소비 채널까지 명시"
      - id: Q2
        label: "차별화"
        weight: 20
        critical: false
        criteria:
          1: "경쟁 콘텐츠/서비스와의 차이점 설명 없음. '더 좋은 서비스', '혁신적인 접근' 같은 추상어만 사용"
          3: "차별점을 언급하나 경쟁사 구체적 비교 없이 자기 주장만. '우리는 AI를 활용한다' (경쟁사도 활용하는데?)"
          5: "경쟁 제품 2개+ 구체적 비교 후, '그들은 X인데 우리는 Y이기 때문에 Z가 다르다' 형태로 차별화 논리 제시"
      - id: Q3
        label: "실행 구체성"
        weight: 20
        critical: false
        criteria:
          1: "'SNS 마케팅을 하면 좋겠다' 수준. 채널/일정/예산/KPI 전무"
          3: "채널은 선정했으나 ('인스타그램 릴스') 게시 빈도/예산/기대 효과가 빠져있거나 비현실적"
          5: "채널별 콘텐츠 포맷/게시 빈도/예산 배분/KPI(도달률, 전환율 등)가 명시됨. 1개월 실행 계획으로 바로 착수 가능"
      - id: Q4
        label: "데이터 활용"
        weight: 20
        critical: false
        criteria:
          1: "직감이나 일반론에만 의존. '요즘 숏폼이 대세니까' 같은 근거 없는 트렌드 주장"
          3: "데이터를 일부 인용하나 출처 불분명하거나, 데이터에서 인사이트 도출이 안 됨 (나열만)"
          5: "설문 결과, 플랫폼 인사이트, 검색 트렌드 등 데이터를 인용하고, 데이터→인사이트→전략 도출 흐름이 명확"
      - id: Q5
        label: "톤/가독성"
        weight: 15
        critical: false
        criteria:
          1: "마케팅 결과물인데 딱딱한 보고서 톤이거나, 반대로 내부 보고서인데 과도하게 캐주얼. 핵심 메시지 불분명"
          3: "톤은 적절하나 일부 장황하거나 반복. 슬로건/카피가 포함됐지만 임팩트 부족"
          5: "목적에 맞는 톤. 핵심 메시지가 명확하고, 카피/슬로건이 있다면 타겟 언어로 작성됨"

  # ═══════════════════════════════════════════
  # 금융분석팀 (cio_manager)
  # ═══════════════════════════════════════════
  finance.investment:
    name: "금융분석팀 검수 기준"
    department_checklist:
      # C1("업무 지시에 답하는가?")을 제외 — CIO 파이프라인에서는 전문가가
      # CIO의 세부 지시를 받고 분석하므로, 원본 명령과 매칭이 안 되는 구조적 문제 있음.
      # 대신 금융 전문 체크리스트(D1~D4)로 대체.
      exclude_common: ["C1"]
      required:
        - id: D1
          label: "도구(API)로 실시간 시장 데이터를 가져왔는가? ※보고서 하단 '사용한 도구' 섹션이 있으면 통과. 도구 호출=실시간 데이터 확보를 의미"
      optional:
        - id: D2
          label: "매수/매도/관망 중 하나의 방향성과 근거가 제시되어 있는가?"
        - id: D3
          label: "분석 대상 종목/시장이 종목코드 또는 티커와 함께 명확히 특정되어 있는가?"
    scoring:
      - id: Q1
        label: "시의성 (도구 데이터 활용)"
        weight: 25
        critical: true
        criteria:
          1: "도구(API)를 호출했으나 가져온 데이터를 분석에 전혀 활용하지 않음. 또는 도구 없이 일반론만 나열 ('최근 변동성이 크다' 수준)"
          3: "도구로 가져온 데이터(주가, 재무제표, 거시지표 등)를 일부 인용했으나, 최근 시장 이벤트와의 연결이 부족하거나 데이터 해석이 피상적"
          5: "도구 데이터를 적극 활용하고, 최근 시장 이벤트(실적 발표, 금리 결정, 섹터 뉴스 등)와 분석 대상의 영향 관계를 구체적 수치와 함께 논리적으로 연결"
        # ★ Q1 판정 보조 규칙:
        #   → '사용한 도구' 섹션에 도구명만 있으면 → Q1 최소 3점
        #   → 도구명 + 조회 시점(KST) 명시까지 있으면 → Q1 5점 가산 근거
        #   → 1점은 "도구를 호출했으나 데이터를 분석에 전혀 활용 안 한" 극단적 경우에만.
      - id: Q2
        label: "매수/매도 균형"
        weight: 20
        critical: false
        criteria:
          1: "매수(또는 매도) 논거만 일방적 나열. '무조건 오른다', '확실히 상승' 같은 확언. 반대 시나리오 전혀 없음"
          3: "양면을 다루나 한쪽이 형식적. 예: 매수 근거 5개 vs 리스크 '주의 필요' 한 줄"
          5: "매수 근거와 매도/리스크 근거가 각각 2개+ 구체적으로 제시. 비율이 합리적(7:3~6:4). '확실히', '반드시' 같은 확언 없음"
      - id: Q3
        label: "리스크 수치화"
        weight: 20
        critical: false
        criteria:
          1: "'리스크가 있습니다' 수준. 손절가도 하방 시나리오도 없음. 또는 리스크 언급 자체가 없음"
          3: "리스크를 언급하나 수치가 없음. '하락할 수 있다' (얼마나?). 손절 기준이 '적절한 시점에' 같은 모호한 표현"
          5: "손절가(또는 손절 기준 %), 하방 시나리오(최악의 경우 목표가), 변동성 수치(베타, 표준편차 등) 중 2개+ 구체적 수치로 제시"
      - id: Q4
        label: "실행 전략"
        weight: 20
        critical: false
        criteria:
          1: "'매수 추천'만 있고 구체적 전략 없음. 진입가/목표가/비중 전혀 없음"
          3: "방향(매수/매도/관망)은 있으나, 진입가/목표가/손절가 중 1~2개 누락. 또는 '현재가 부근에서 매수' 같은 모호한 표현"
          5: "진입가(또는 진입 조건)/1차/2차 목표가/손절가가 구체적 수치로 명시. 분할 매수/매도 전략이 있으면 비중까지 제시"
      - id: Q5
        label: "출처 투명성"
        weight: 15
        critical: false
        criteria:
          1: "수치의 출처가 전혀 없음. '어디서 가져온 건지' 추적 불가"
          3: "일부 수치에 출처가 있으나 ('증권사 리포트') 구체적 기관명/날짜가 빠져있음"
          5: "핵심 데이터마다 출처 명시 (DART 공시, KRX 시세, 증권사명+리포트일, 뉴스 기사 등). 독자가 원본을 직접 확인 가능"

  # ═══════════════════════════════════════════
  # 콘텐츠/출판팀 (cpo_manager)
  # ═══════════════════════════════════════════
  publishing:
    name: "콘텐츠팀 검수 기준"
    department_checklist:
      required:
        - id: D1
          label: "사실관계(날짜, 수치, 이름 등)가 정확한가?"
      optional:
        - id: D2
          label: "시각적 요소(표, 목록 등)가 적절히 사용되었는가?"
    scoring:
      - id: Q1
        label: "사실 정확성"
        weight: 25
        critical: true
        criteria:
          1: "날짜/이름/수치 오류가 2건 이상. 존재하지 않는 사건이나 인물을 기술. 회사 연혁의 시점이 뒤바뀜"
          3: "대체로 정확하나, 1건의 사소한 사실 오류(오탈자 수준이 아닌 팩트 오류)가 있음. 또는 미확인 사실을 단정적으로 기술"
          5: "모든 날짜/이름/수치/사건이 정확함. 확인이 어려운 내용은 '~로 알려져 있다', '~에 따르면' 등 적절한 한정어 사용"
      - id: Q2
        label: "범위 완결성"
        weight: 20
        critical: false
        criteria:
          1: "요청 범위의 절반 이하만 다룸. 핵심 에피소드/항목이 누락됨"
          3: "대부분 다루나 일부가 피상적 (한 줄로 마무리) 또는 균형이 맞지 않음 (한 항목에 80%, 나머지 20%)"
          5: "요청 범위를 빠짐없이 다루고, 각 항목의 깊이가 일관됨. 내용 간 경중의 비율이 적절"
      - id: Q3
        label: "가독성"
        weight: 20
        critical: false
        criteria:
          1: "문장 과밀/중복/접속사 남발로 읽는 비용이 큼. 한 문단이 10줄 이상 이어짐"
          3: "읽히지만 일부 장황하거나, 같은 표현이 반복됨. 핵심 문장이 부가 설명에 묻힘"
          5: "정보 밀도가 높고 반복 최소. 한 문장이 한 가지 내용만 전달. 한 번 읽어 이해 가능"
      - id: Q4
        label: "구조/형식"
        weight: 20
        critical: false
        criteria:
          1: "소제목 없이 긴 텍스트로 나열. 논리적 순서 없이 뒤죽박죽. 문단 구분이 자의적"
          3: "소제목은 있으나, 순서가 비논리적이거나 소제목과 내용이 불일치하는 곳이 있음"
          5: "제목→소제목→본문의 계층 구조가 명확. 시간순/중요도순/논리순 등 일관된 원칙으로 배열"
      - id: Q5
        label: "시각화 활용"
        weight: 15
        critical: false
        criteria:
          1: "표/목록/강조 등 시각 요소가 전혀 없이 순수 텍스트 나열. 복잡한 비교 정보도 문장으로만 설명"
          3: "시각 요소를 일부 사용하나 일관성이 없거나, 텍스트로 충분한 곳에 불필요한 표를 사용"
          5: "비교 정보는 표로, 절차는 번호 목록으로, 핵심은 볼드로 — 내용 유형에 맞는 시각 요소를 적절히 활용"

  # ═══════════════════════════════════════════
  # 기술개발팀 (cto_manager) — 현재 휴면이지만 기준 준비
  # ═══════════════════════════════════════════
  leet_master.tech:
    name: "기술개발팀 검수 기준"
    department_checklist:
      required:
        - id: D1
          label: "기술 용어와 개념이 정확한가?"
      optional:
        - id: D2
          label: "코드 예시 또는 아키텍처 설계가 포함되어 있는가?"
    scoring:
      - id: Q1
        label: "기술 정확성"
        weight: 25
        critical: true
        criteria:
          1: "존재하지 않는 API/라이브러리/함수명 사용. 문법 오류가 있는 코드 예시. 기술 용어의 의미를 잘못 사용 (예: '비동기'와 '병렬'을 혼용)"
          3: "기술적으로 대체로 맞으나, 버전 차이(예: Python 2 문법을 3으로 제시)나 deprecated 기능 사용. 기술 설명의 정확도가 90% 수준"
          5: "모든 기술 용어/API/코드가 정확하고 최신 버전 기준. 기술적 뉘앙스(동기/비동기, stateful/stateless 등)가 정확히 구분됨"
      - id: Q2
        label: "실현 가능성"
        weight: 20
        critical: false
        criteria:
          1: "현재 기술/인프라/예산으로 불가능한 제안. 또는 'AI로 다 해결' 같은 마법적 사고"
          3: "기술적으로 가능하나, 현재 인프라(Oracle ARM 24GB, Always Free) 제약이나 비용을 고려하지 않음"
          5: "현실적 제약(서버 스펙, 비용, 인력, 시간)을 명시적으로 고려한 제안. 대안까지 제시"
      - id: Q3
        label: "코드/설계 구체성"
        weight: 20
        critical: false
        criteria:
          1: "추상적 설명만 있고 코드/설계도가 전혀 없음. 'MVC 패턴을 사용합니다' 수준"
          3: "부분적 코드나 설계가 있으나, 핵심 로직이 빠져있거나 의사코드 수준"
          5: "핵심 로직의 실행 가능한 코드 또는 상세 아키텍처(컴포넌트 다이어그램, 데이터 흐름)가 포함됨"
      - id: Q4
        label: "보안/안정성"
        weight: 20
        critical: false
        criteria:
          1: "SQL injection, XSS, 하드코딩된 시크릿 등 명백한 보안 취약점. 에러 핸들링 전무"
          3: "기본 보안은 고려했으나 edge case 핸들링이 부족. 또는 보안 사항을 '나중에 처리' 식으로 미룸"
          5: "OWASP Top 10 수준의 보안 고려 포함. 에러 핸들링/입력 검증/인증/인가가 설계에 반영됨"
      - id: Q5
        label: "유지보수성"
        weight: 15
        critical: false
        criteria:
          1: "하드코딩 다수, 매직 넘버, 설명 없는 변수명. 다른 개발자가 이해/수정 불가능한 구조"
          3: "구조는 있으나, 설정값이 코드에 박혀있거나 테스트 전략이 없음"
          5: "설정 분리(config), 명확한 네이밍, 모듈화, 테스트 가능한 구조. 6개월 후에도 수정 가능한 수준"

# ─────────────────────────────────────────────
# 투자 분석 전용 검수 규칙 (CIO/투자분석가 보고서에만 적용)
# 규칙 기반 사전 필터 — LLM 호출 전에 키워드로 빠르게 체크
# ─────────────────────────────────────────────
investment_analysis:
  balance_required:
    enabled: true
    description: "매수 근거와 매도/리스크 근거가 모두 있어야 함"
    min_risk_mentions: 2
    keywords_risk:
      - "하락 리스크"
      - "손절"
      - "위험"
      - "리스크"
      - "주의"
      - "매도"
      - "단점"
      - "우려"
    keywords_bullish:
      - "매수"
      - "상승"
      - "호재"
      - "강세"
      - "기회"
    bias_threshold: 3.0

  risk_disclosure:
    enabled: true
    description: "투자 리스크를 반드시 수치로 명시해야 함"
    required_fields:
      - "목표주가 하단"
      - "손절 기준"
    allow_partial: true

  optimism_bias_check:
    enabled: true
    description: "지나치게 낙관적인 표현을 감지"
    penalty_phrases:
      - "무조건 오른다"
      - "확실히"
      - "반드시 상승"
      - "100%"
      - "절대적으로"
    warning_phrases:
      - "강력 매수"
      - "폭발적 상승"
      - "대박"
    max_penalty_count: 0
    max_warning_count: 2

  evidence_quality:
    enabled: true
    description: "의견이 아닌 데이터 기반 근거가 있어야 함"
    min_data_points: 1
    evidence_keywords:
      - "PER"
      - "PBR"
      - "ROE"
      - "영업이익"
      - "매출"
      - "%"
      - "억"
      - "조"
